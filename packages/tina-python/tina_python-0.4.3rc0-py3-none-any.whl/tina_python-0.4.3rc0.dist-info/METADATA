Metadata-Version: 2.2
Name: tina-python
Version: 0.4.3rc0
Summary: tina is in your computer!
Home-page: https://gitee.com/wang-churi/tina
Author: ç‹å‡ºæ—¥
Author-email: wangchuri@163.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: httpx
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# å¦‚ä½•å®‰è£…tina

```bash
pip install tina-python
```
## æºä»£ç 
tinaéœ€è¦ä»¥ä¸‹ä¾èµ–ï¼š
```
diskcache==5.6.3
faiss-cpu==1.9.0.post1
Jinja2==3.1.5
lxml==5.3.0
MarkupSafe==3.0.2
numpy==2.2.1
packaging==24.2
PyPDF2==3.0.1
python-docx==1.1.2
å¦‚æœä½¿ç”¨APIæ–¹å¼ä½¿ç”¨å¤§æ¨¡å‹
httpx
å¦‚æœä½¿ç”¨æœ¬åœ°æ–¹å¼
llama-cpp-python
```
```bash
cd [æºä»£ç æ–‡ä»¶å¤¹]
pip install -r requirements.txt
```
å¦‚æœä½ éœ€è¦æœ¬åœ°ä½¿ç”¨å¤§æ¨¡å‹
```bash
pip install llama-cpp-python
```
# tinaæ˜¯ä»€ä¹ˆ?
tinaæ˜¯ä¸€ä¸ªç®€å•çš„åŸºäºå¤§æ¨¡å‹çš„å·¥å…·è°ƒç”¨æ™ºèƒ½ä½“åº“ï¼Œä½œä¸ºæˆ‘åœ¨å¤§äºŒæ—¶å€™ä¸€ä¸ªPythonä¸å¤§æ¨¡å‹åº”ç”¨çš„ç»ƒä¹ é¡¹ç›®ï¼Œæœ‰éƒ¨åˆ†ä»£ç æ˜¯AIå‚ä¸ï¼Œæˆ‘æ¥ä¿®æ”¹å®Œæˆçš„ï¼Œä»£ç ç›®å‰çš„è´¨é‡ä¸é«˜ï¼Œå¯ä»¥éª‚è½»ç‚¹ä¹ˆï¼Œç»´æŠ¤æœŸé•¿è¯·åŸè°…ï¼Œç›®å‰è¿˜è¦è¯»ä¹¦ï¼Œï¼Œï¼Œ

ä¸€å¼€å§‹æ˜¯è‡ªå·±æƒ³å®ç°ä¸€ä¸ªæœ¬åœ°çš„çŸ¥è¯†åº“ï¼Œåé¢å‘ç°å¤§æ¨¡å‹åŸæ¥å¯ä»¥è°ƒç”¨å·¥å…·ï¼Œï¼Œï¼Œ

`æ³¨æ„ï¼štinaåªåŒ…å«äº†å°‘é‡åŸºæœ¬å·¥å…·å’Œå¯¹åº”çš„RAGæŸ¥è¯¢å·¥å…·ï¼Œä¸åŒ…æ‹¬å…¶ä»–å·¥å…·ï¼Œåªæ˜¯è¯´ï¼Œæˆ‘å¯ä»¥è®©ä½ æ–¹ä¾¿çš„ç»™å¤§æ¨¡å‹éƒ¨ç½²å·¥å…·ï¼Œä½ æ›´å¤šéœ€è¦è€ƒè™‘å·¥å…·æ€ä¹ˆå®ç°`

æ¯”å¦‚ä½ å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨Toolsç±»çš„æ–¹æ³•å°±å¯ä»¥å°†å·¥å…·ä¿¡æ¯æäº¤ä¹‹åï¼Œè®¾ç½®ä¸€ä¸ªæ™ºèƒ½ä½“å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå…·ä½“è¯·çœ‹ä¸‹é¢çš„å§

å¥¹åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

### 1.ç®€å•çš„è°ƒç”¨å¤§æ¨¡å‹
åªéœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå¤§æ¨¡å‹å¯¹è±¡ï¼Œå³å¯é€šè¿‡è®¾å®šæ–¹æ³•çš„å‚æ•°å³å¯ï¼›
### 2.è®°å¿†æœºåˆ¶
å†…éƒ¨é€šè¿‡è®°å¿†åˆ†ç±»å’Œé‡è¦æ€§è¯„åˆ†æ¥å¯¹ä½ å’Œå¤§æ¨¡å‹çš„æ‰€æœ‰äº¤æµè¿›è¡Œè®°å¿†ï¼Œå…·æœ‰çŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†
### 3.å·¥å…·è°ƒç”¨æœºåˆ¶
ä½ åªéœ€è¦å†™å¥½å·¥å…·çš„Pythonä»£ç ï¼Œå¹¶åœ¨æ³¨å†Œå·¥å…·çš„æ—¶å€™å†™å¥½æºæ–‡ä»¶è·¯å¾„ï¼Œå¤§æ¨¡å‹å°±å¯ä»¥è°ƒç”¨ï¼›
### 4.ç®€å•çš„RAGå®ç°
å¯ä»¥å¯¹PDFï¼Œdoxcï¼Œmdå’ŒTXTç­‰å¤šç§æ–‡æœ¬è¿›è¡Œè¯»å–ï¼ŒåŒæ—¶å¯¹æ–‡æœ¬è¿›è¡Œç®€å•çš„æ¸…æ´—ï¼Œåˆ†æ®µå’Œå‘é‡åŒ–ï¼›
### 5.è®¾å®šAgent
è®¾å®šä¸€ä¸ªå·¥å…·è°ƒç”¨çš„æ™ºèƒ½ä½“ï¼ŒåŒæ—¶åŒ…æ‹¬è®°å¿†ï¼Œåªéœ€è¦å°†ä¸Šé¢çš„å¤§æ¨¡å‹ï¼Œå·¥å…·å’Œä¸€ä¸ªæç¤ºè¯å¯¹è±¡å®ä¾‹åŒ–ï¼Œé€šè¿‡å‚æ•°è®¾å®šå®ä¾‹åŒ–agentå³å¯ï¼Œè°ƒç”¨å’Œå¤§æ¨¡å‹ä¸€æ ·ç®€å•
### 6.æ¨¡å—åŒ–è®¾è®¡
è¿™æ„å‘³ç€ä»¥ä¸Šçš„åŠŸèƒ½ä½ éƒ½å¯ä»¥æ‹†å¼€æ¥ç”¨ï¼Œä¸ä¸€å®šæ˜¯æ™ºèƒ½ä½“ï¼Œè¿˜å¯ä»¥æ˜¯ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„å·¥ä½œæµï¼š\
RAG->LLM->LLM...

å¥¹ä¹Ÿå¯ä»¥å« llama-tool-call-agentï¼Œåœ¨ä¸€å¼€å§‹ï¼Œå¥¹æ˜¯ä¸€ä¸ªæœ¬åœ°ä½¿ç”¨llama.cppéƒ¨ç½²æ¨¡å‹å’ŒRAGçš„å°å·¥å…·

# ä¸€.ä»ä¸€ä¸ªtinaå¼€å§‹æ¥è§¦
tinaä¸­çš„Tinaæ˜¯ä¸€ä¸ªåœ¨æ§åˆ¶å°å®ç°çš„Agent,ç”¨åˆ°äº†tinaé‡Œé¢çš„æ‰€æœ‰åŠŸèƒ½ï¼ˆå¯èƒ½ï¼Ÿï¼‰
```python
from tina import Tina
from tina.LLM.llama import llama
#Tinaéœ€è¦ä¸€ä¸ªLLMæ¥é©±åŠ¨
#æœ¬åœ°æ¨¡å‹å¦‚ä¸‹
llm = llama(
    path="[æ¨¡å‹è·¯å¾„]",
    context_length=10000#æ ¹æ®ä½ çš„æ¨¡å‹æ¥
)
#APIå¦‚ä¸‹ï¼Œè¿™é‡Œæ‹¿Qwenåšæ¼”ç¤º
llm = Qwen(
    api_key =""#æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡
)
my_tina = Tina(
    path="[Tinaä¼šåœ¨è¿è¡Œçš„æ—¶å€™äº§ç”Ÿæ–‡ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„æ¥ä¿å­˜]",
    LLM = llm
)
#ä½¿ç”¨runæ¥å¯åŠ¨
my_tina.run()
```
å½“ä½ æˆåŠŸå¯åŠ¨åï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™æ ·çš„é¡µé¢
```console
(ãƒ»âˆ€ãƒ»)  tina by QiQi in ğŸŒŸ XIMO


ğŸ˜Š æ¬¢è¿ä½¿ç”¨tinaï¼Œä½ å¯ä»¥è¾“å…¥#helpæ¥æŸ¥çœ‹å¸®åŠ©
ğŸ¤” é€€å‡ºå¯¹è¯ï¼š"#exit"
ğŸ“¤ æ–‡ä»¶ä¸Šä¼ ï¼š"#file"

ğŸ˜€ å½“å‡ºç°"tinaæ­£åœ¨è®°å¿†ä¿¡æ¯æ—¶..."è¯·ä¸è¦æ‰“æ–­


( â€¢ Ì€Ï‰â€¢Ì ) >>>User:
```
Tinaæ˜¯åˆ©ç”¨äº†tinaåº“çš„åŸºç¡€åŠŸèƒ½æ¥æ„å»ºçš„ä¸€ä¸ªè½¯ä»¶ï¼ŒåŸºäºPython\
å¥¹çš„åŠŸèƒ½æœ‰ï¼š\
1.**è®°å¿†**ï¼šä½ å’Œå¥¹ä¹‹é—´çš„é‡è¦äº¤æµä¼šè¢«è®°å¿†ï¼Œä½ çš„ä¿¡æ¯ï¼Œä½ çš„æŒ‡ä»¤å¥¹ä¹Ÿä¼šè®°å¾—\
2.**å·¥å…·è°ƒç”¨**ï¼š\
åœ¨å®ä¾‹åŒ–my_tinaæ—¶æŒ‡å®šTinaçš„toolså‚æ•°ï¼Œtoolsæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç¬¦åˆå·¥å…·è°ƒç”¨çš„JSON \
3.**æ“ä½œè®¡ç®—æœºå’ŒRAG**\
æœ¬è´¨ä¹Ÿæ˜¯å·¥å…·è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ç»™ä½ ä»¬æä¾›äº†ä¾¿æ·çš„æ–¹æ³•ï¼Œåœ¨Tinaä¸­æŒ‡å®šisSystemToolä¸ºTrueå’ŒisRAGä¸ºTrueï¼Œ
å°±å¯ä»¥ä½¿ç”¨tinaè‡ªå¸¦çš„ç³»ç»Ÿå·¥å…·å’ŒRAGæ¥å£ï¼Œç”±å¤§æ¨¡å‹è‡ªå·±è°ƒç”¨\
RAGåŠŸèƒ½éœ€è¦å‘é‡åŒ–æ¨¡å‹ï¼Œå‚è€ƒåé¢çš„RAGä¸å‘é‡åŒ–
# æˆ‘çš„å®ç°
ä½ å¯ä»¥å‚è€ƒä¸€ä¸‹æˆ‘çš„ç”¨æ³•
```python
#wcrtoolsåœ¨åé¢
from tina import Tina
from tina.LLM.Qwen import Qwen
tools=[
    {
        "name":"outputToMarkdown",
        "description":"ä½¿ç”¨è¯¥å·¥å…·å¯ä»¥å°†è¾“å‡ºå¯¼å‡ºåˆ°mdæ–‡ä»¶ä¸­",
        "required_parameters":["name","content"],
        "parameters":{
            "name":{"type":"str","description":"æ–‡ä»¶åï¼Œä¸éœ€è¦å¸¦åç¼€å"},
            "content":{"type":"str","description":"æ–‡ä»¶å†…å®¹"}
        },
        "path":"D:/development/project/TCG/outputToMarkdown.py"
    },
    {
        "name":"smile",
        "description":"å¦‚æœä½ æ„Ÿè§‰å¼€å¿ƒçš„è¯è°ƒç”¨å®ƒå¯ä»¥å¾®ç¬‘å“¦",
        "required_parameters":[],
        "parameters":{},
        "path":"D:/development/project/TCG/action.py"
    },
    {
        "name":"angry",
        "description":"å¦‚æœä½ æ„Ÿè§‰ä¸å¼€å¿ƒå¯ä»¥ç”Ÿæ°”ä¸€ä¸‹",
        "required_parameters":[],
        "parameters":{},
        "path":"D:/development/project/TCG/action.py"
    },
    {
        "name":"sad",
        "description":"å¦‚æœä½ æ„Ÿè§‰å¾ˆéš¾è¿‡å¯ä»¥å“­ä¸€ä¼šå„¿",
        "required_parameters":[],
        "parameters":{},
        "path":"D:/development/project/TCG/action.py"
    },
    {
        "name":"shy",
        "description":"å¦‚æœä½ æ„Ÿè§‰å®³ç¾ä¼šè„¸çº¢",
        "required_parameters":[],
        "parameters":{},
        "path":"D:/development/project/TCG/action.py"
    }
]
llm = Qwen()
my_tina = Tina(path='d:/',
                LLM=llm,
                embeding_model="C:/model/m3e_base.gguf",
                tools=tools,
                toolsLib=r"D:\development\project\TCG\wcrtools.py",
                isSystem=True,
                isRAG=True,
                is_tool_call_permission=False
)
my_tina.run()
```
wcrtools ä¸ä¸€å®šå¥½ç”¨å“¦
```python
import webbrowser
import requests
from bs4 import BeautifulSoup
import requests
import os
import subprocess
import threading

def writeCode(filename, code):
    """
    å°†ä»£ç å†™å…¥æ–‡ä»¶å¹¶è¿”å›æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¦†ç›–åŸæ–‡ä»¶
    Args:
        filename: æ–‡ä»¶å
        code: ä»£ç å†…å®¹
    """
    path = os.path.join(os.getcwd(), filename)
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(code)
    return path

def readCode(filename):
    """
    è¯»å–æ–‡ä»¶å†…å®¹,ä»…é™äºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶
    Args:
        filename: æ–‡ä»¶å
    """
    path = os.path.join(os.getcwd(), filename)
    with open(filename, 'r') as f:
        code = f.read()
    return code

def deleteCode(filename):
    """
    åˆ é™¤æ–‡ä»¶
    Args:
        filename: æ–‡ä»¶å
    """
    path = os.path.join(os.getcwd(), filename)
    os.remove(path)
    return path


def runCode(filename):
    """
    è¿è¡Œä»£ç ï¼Œå¹¶åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºè¾“å‡ºç»“æœ,ä»…é™äºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶
    Args:
        filename: æ–‡ä»¶å
    """
    path = os.path.join(os.getcwd(), filename)
    try:
        args = ['python', path]
        p = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        out, err = p.communicate()
        if out:
            print(out.decode('utf-8'))
            return out.decode('utf-8')
        if err:
            print(err.decode('utf-8'))
            return err.decode('utf-8')
    except Exception as e:
        print(str(e))
        return str(e)
def runCodeNotOpenTerminal(code):
    """
    è¿è¡Œä»£ç ï¼Œå¹¶åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºè¾“å‡ºç»“æœ,ä¸æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£
    Args:
        code: ä»£ç å†…å®¹
    """
    try:
        eval_thread = threading.Thread(target=eval, args=(code,))
        eval_thread.start()
        result = eval_thread.join()
        return result
    except Exception as e:
        return str(e)

def openBzhan():
    """
    å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰“å¼€Bilibiliç½‘é¡µæ¥æ‘¸é±¼
    """
    webbrowser.open("https://www.bilibili.com/")
    print("Bilibili opened")
    return "Bilibili opened!"

def openBrowserSearch(text):
    """
    å¸®åŠ©ç”¨æˆ·å¿«é€Ÿåœ¨æµè§ˆå™¨ä¸­æœç´¢æŒ‡å®šå†…å®¹ï¼Œä¸ä¼šæ‰“å¼€æµè§ˆå™¨ï¼Œæœç´¢ç»“æœç”¨æˆ·çœ‹ä¸åˆ°ï¼Œè¯·ä½ æ€»ç»“æˆ–è€…æŒ‘é€‰åˆé€‚çš„ç»“æœï¼Œä½¿ç”¨openURL()å‡½æ•°æ‰“å¼€ç½‘å€
    Args:
        text: æœç´¢å†…å®¹
    Returns:
        è¾“å‡ºæœç´¢ç»“æœ
    """
    # å‘é€æœç´¢è¯·æ±‚
    search_url = f"https://www.bing.com/search?q={text}"
    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'}
    response = requests.get(search_url, headers=headers)
    
    # è§£ææœç´¢ç»“æœ
    soup = BeautifulSoup(response.text, 'html.parser')
    results = []

    # æå–æ ‡é¢˜å’Œé“¾æ¥ (æ ¹æ®Bingå®é™…ç»“æ„è°ƒæ•´é€‰æ‹©å™¨)
    for item in soup.select('li.b_algo h2 a'):
        title = item.get_text()
        url = item.get('href')
        content = getURLContent(url)
        if content == -1:
            results.append(f"{title}\n{url}\nè¯·æ±‚å¤±è´¥")
        elif content == -2:
            results.append(f"{title}\n{url}\nè§£æå¤±è´¥")
        else:
            results.append(f"{title}\n{url}\n{content}")
    
    output = "å¸®ä½ æœç´¢äº†ï¼š\n" + "\n\n".join(results)
    return output
def openURL(url):
    """
    å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰“å¼€æŒ‡å®šç½‘å€
    Args:
        url: ç½‘å€
    Returns:
        è¾“å‡ºæ‰“å¼€ç»“æœ
    """
    webbrowser.open(url)
    print(f"{url} opened")
    return f"{url} opened!"


def getURLContent(url):
    """
    æ ¹æ®URLè·å–ç½‘é¡µä¸»è¦å†…å®¹
    Args:
        url: ç½‘å€
    Returns:
        ç½‘é¡µä¸»è¦å†…å®¹, è‹¥å¤±è´¥è¿”å›-1æˆ–-2
    """
    try:
        # è®¾ç½®è¯·æ±‚å¤´æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®
        headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
        }
        
        # å‘é€HTTPè¯·æ±‚
        response = requests.get(url, headers=headers, timeout=10)
        response.raise_for_status()  # æ£€æŸ¥è¯·æ±‚çŠ¶æ€
        
        # è§£æHTMLå†…å®¹
        soup = BeautifulSoup(response.text, 'html.parser')
        
        # å°è¯•å¤šç§å¸¸è§å†…å®¹æ ‡ç­¾æå–
        for tag in ['article', 'div.main-content', 'section', 'div.content']:
            elements = soup.select(tag)
            if elements:
                return "\n\n".join([e.get_text(strip=True) for e in elements])
        
        # å¤‡ç”¨æ–¹æ¡ˆï¼šæå–æ®µè½ç»„åˆ
        paragraphs = soup.find_all('p')
        if paragraphs:
            return "\n".join([p.get_text(strip=True) for p in paragraphs])
            
        return "æœªæ‰¾åˆ°æ˜ç¡®çš„å†…å®¹åŒºåŸŸ"
        
    except requests.exceptions.RequestException:
        return -1  # ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¿”å›é”™è¯¯ç -1
    except Exception:
        return -2  # å…¶ä»–å¤„ç†å¼‚å¸¸ï¼Œè¿”å›é”™è¯¯ç -2






```
# äºŒ.å®ä¾‹åŒ–ä¸€ä¸ªå¤§æ¨¡å‹
æ¨¡å‹å¯ä»¥ä½¿ç”¨æœ¬åœ°æˆ–è€…Apiçš„å½¢å¼çš„è°ƒç”¨ï¼Œæœ¬åœ°ä½¿ç”¨llama.cppçš„GGUFæ ¼å¼çš„æ¨¡å‹ï¼ŒApiä½¿ç”¨openaiæ ¼å¼å…¼å®¹çš„æ¨¡å‹
## 1.æœ¬åœ°çš„è°ƒç”¨ï¼š
åœ¨tina.LLM.llamaæŸ¥çœ‹\
æœ¬è´¨æ˜¯å°†llama-cpp-pythonå°è£…æˆæˆ‘éœ€è¦çš„æ ¼å¼
çœ‹çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š
```python
from tina.LLM.llama import llama
#ä¸ºäº†ä¸å’ŒLlamaå†²çªï¼Œé¦–å­—æ¯æ²¡æœ‰å¤§å†™
llm = llama(
    path:str=#"ggufæ¨¡å‹è·¯å¾„",
    context_length:int=#æ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡,
    device:str = #"è®¾å¤‡ï¼Œæœ‰CPUå’ŒGPU",
    GPU_n:int = #æŒ‡å®šéœ€è¦è´Ÿè½½åˆ°GPUçš„æ¨¡å‹å±‚æ•°ï¼Œ-1è¡¨ç¤ºå…¨éƒ¨å±‚è´Ÿè½½åˆ°GPUçš„ï¼ˆä¸æ¸…æ¥šæ¨¡å‹å†…éƒ¨å®ç°ä¸è¦åŠ¨ï¼Œåœ¨ä½¿ç”¨GPUæ˜¯é»˜è®¤ä¸º-1ï¼‰,
    verbose:bool=#æ‰“å°llama.cppè¯»å–æ¨¡å‹æ—¶çš„æ—¥å¿—
)
```
ä½¿ç”¨ä¸Šé¢çš„ä»£ç å³å¯åˆå§‹åŒ–ä½ çš„æœ¬åœ°æ¨¡å‹ï¼Œåªéœ€è¦å°†GGUFæ¨¡å‹è·¯å¾„èµ‹å€¼ç»™pathå˜é‡ã€‚
### llm.predict()æ–¹æ³•ä½¿ç”¨
```python
llm.predict()#ä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥è®©å¤§æ¨¡å‹äº§ç”Ÿè¾“å‡ºï¼Œå‚æ•°å¯ä»¥é€šè¿‡è°ƒç”¨æŸ¥çœ‹
#predict()ä¸­input_textå’Œmessageså‚æ•°æ˜¯å†²çªçš„ï¼Œåè€…æ˜¯ä¸ºäº†æ–¹ä¾¿è‡ªå·±æ„é€ æ¶ˆæ¯ä¼ é€’ç»™å¤§æ¨¡å‹
```
##### ä¸€èˆ¬ç”¨æ³•å¦‚ä¸‹
```python
#resultè¿”å›ä¸€ä¸ªå­—å…¸
result = llm.predict(
    input_text="ä½ å¥½ï¼Ÿ",
    #sys_prompt = "ä½ æ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½åŠ©æ‰‹",
)
print(result)
#è¾“å‡ºï¼š{"role":"assi",""content":"ä½ å¥½ï¼Œæˆ‘æ˜¯ã€‚ã€‚ã€‚"}ï¼Œå¯ä»¥é€šè¿‡result["content"]è·å¾—å†…å®¹
```
##### æµå¼è¾“å‡ºå¦‚ä¸‹
```python
#æŒ‡å®šstreamä¸ºTrueï¼Œè¿™ä¸ªæ—¶å€™resultä¸ºç”Ÿæˆå™¨
result = llm.predict(
    input_text="ä½ å¥½ï¼Ÿ",
    #sys_prompt = "ä½ æ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½åŠ©æ‰‹",
    stream=True
)
for chunk in result:
    print(chunk,end="")
#è¾“å‡ºï¼šä½ å¥½.....
```
## 2.apiè°ƒç”¨
ä»¥ä¸‹ç”¨Qwenæ¥æ¼”ç¤º
```python
from tina.LLM.Qwen import Qwen
qwen = Qwen(
    #api_key = "ä½ çš„api_key",
)
#æˆ‘ä»¬éƒ½ä¸æ€ä¹ˆæ¨èä½ ç›´æ¥å°†api_keyå†™åœ¨ä»£ç é‡Œï¼Œå®¹æ˜“æ³„æ¼
```
å½“ä½ å®ä¾‹åŒ–æ—¶ï¼ŒQwenå†…ä¼šä»ç¯å¢ƒå˜é‡é‡Œé¢é€šè¿‡QWEN_API_KEYæ¥è·å–ä½ çš„api key
å‰©ä¸‹çš„æ–¹æ³•å’Œæœ¬åœ°ä½¿ç”¨æ¨¡å‹çš„ä¸€è‡´\
ç›®å‰æœ‰Qwenï¼ŒDeepSeek
# ä¸‰.å·¥å…·æ³¨å†Œ
## å…ˆå®ä¾‹åŒ–Toolsç±»
```python 
from tina.core.tools import Tools
tools = Tools()
```
## å•ä¸ªå·¥å…·æ³¨å†Œ
```python
#æ ¼å¼å¦‚ä¸‹
tools.register(
    name="å·¥å…·çš„åå­—",
    description="å·¥å…·åŠŸèƒ½çš„æè¿°",
    required_parameters=["å¿…é¡»è¦å¡«çš„å‚æ•°åç§°",...],
    parameters={"å­—å…¸ç±»å‹"},
    path="å·¥å…·ä»£ç çš„è·¯å¾„"
)
# parameters (dict): å‚æ•°çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½è¦æœ‰ç±»å‹å’Œæè¿°
#     æ ¼å¼ï¼š
#         {
#         "å‚æ•°å": {
#                 "type": "å‚æ•°ç±»å‹",
#                 "description": "å‚æ•°æè¿°"
#             }
#         }

#ç¤ºä¾‹
tools.register(
    name="query",
    description = "åœ¨æ–‡æ¡£é‡Œé¢æŸ¥è¯¢",
    required_parameters=["query_text"],
    parameters={
        "query_text":{
            "type":"str",
            "description":"æŸ¥è¯¢çš„ä¿¡æ¯"
        },
        "n":{
            "type":"int",
            "description":"è¿”å›çš„ç»“æœæ•°"
        }
    },
    path="d:/test/query.py"#è·¯å¾„è¦è‡ªå·±ä¼ é€’ï¼Œä¸è¦ç”¨æˆ‘çš„å“¦
)
```
## å¤šä¸ªå·¥å…·æ³¨å†Œ
```python
SystemTools = [
    {
        "name": "getTime",
        "description": "è·å–å½“å‰æ—¶é—´",
        "required_parameters": [],
        "parameters": {},
        "path": "d:/test/systemTools.py"
    },
    {
        "name": "shotdownSystem",
        "description": "è¯¥å·¥å…·ä¼šå…³é—­è®¡ç®—æœº",
        "required_parameters": [],
        "parameters": {},
        "path": "d:/test/systemTools.py"
    },
    {
        "name":"getSoftwareList",
        "description":"è·å–ç³»ç»Ÿè½¯ä»¶åˆ—è¡¨",
        "required_parameters":[],
        "parameters":{},
        "path":"d:/test/systemTools.py"
    },
    {
        "name":"getSystemInfo",
        "description":"è·å–ç³»ç»Ÿä¿¡æ¯",
        "required_parameters":[],
        "parameters":{},
        "path":"d:/test/systemTools.py"
    }
]

tools.multiregister(SystemTools)
```
ä»pyæ–‡ä»¶è½½å…¥å·¥å…·
```python
from tina.core.tools import Tools
tools = Tools.loadToolsFromPyFile([Pyæ–‡ä»¶è·¯å¾„])#è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªToolså®ä¾‹
```

å·¥å…·ç±»è´Ÿè´£å·¥å…·çš„ç®¡ç†ï¼Œå®ƒæœ‰æ–¹æ³•æ¥è·å–å·¥å…·çš„åå­—ï¼Œè·¯å¾„ï¼Œå’Œå‚æ•°éªŒè¯ï¼Œä½†æ˜¯ä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œè¿™äº›æ–¹æ³•ä¼šåœ¨æ™ºèƒ½ä½“å’Œæ™ºèƒ½ä½“æ‰§è¡Œå™¨é‡Œé¢è¢«ä½¿ç”¨
# å››.è®¾ç½®ä¸€ä¸ªæ™ºèƒ½ä½“
tinaé‡Œé¢çš„æ™ºèƒ½ä½“å’Œå¤§æ¨¡å‹çš„åŒºåˆ«åœ¨äº
æ™ºèƒ½ä½“æ‹¥æœ‰è®°å¿†å’Œå·¥å…·ï¼ŒåŒæ—¶å†…éƒ¨ä¼šæ‰§è¡Œå·¥å…·è·å–ç»“æœï¼Œè€Œå¤§æ¨¡å‹æ˜¯ä¸€ä¸ªç®€å•çš„è¾“å…¥è¾“å‡ºä½¿ç”¨ã€‚\
**Agentä¸æ˜¯è‡ªåŠ¨è¿è¡Œçš„ï¼Œä½ éœ€è¦è‡ªå·±è®¾è®¡äº‹ä»¶æ¥ä½¿ç”¨Agentçš„æ–¹æ³•**
```python
#è°ƒç”¨æ–‡ä»¶å¤¹ç®¡ç†å™¨ï¼Œè¿™æ˜¯ä¸ºäº†ä¸è®©tinaäº§ç”Ÿçš„æ–‡ä»¶ä¸ä¹±è·‘
from tina.core.manage import TinaFolderManager

TinaFolderManager.init(â€œä½ æƒ³æŠŠæ–‡ä»¶æ”¾åœ¨å“ªé‡Œï¼Ÿâ€)

from tina.LLM.llama import llama
from tina.core.tools import Tools
from tina.core.prompt import Prompt

from tina.Agent import Agent

#ä¹Ÿå¯ä»¥ä½¿ç”¨apiæ–¹å¼è°ƒç”¨
llm = llama(
    path:str=#"ggufæ¨¡å‹è·¯å¾„",
    context_length:int=#æ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡,
    device:str = #"è®¾å¤‡ï¼Œæœ‰CPUå’ŒGPU",
    GPU_n:int = #æŒ‡å®šéœ€è¦è´Ÿè½½åˆ°GPUçš„æ¨¡å‹å±‚æ•°ï¼Œ-1è¡¨ç¤ºå…¨éƒ¨å±‚è´Ÿè½½åˆ°GPUçš„ï¼ˆä¸æ¸…æ¥šæ¨¡å‹å†…éƒ¨å®ç°ä¸è¦åŠ¨ï¼Œåœ¨ä½¿ç”¨GPUæ˜¯é»˜è®¤ä¸º-1ï¼‰,
    verbose:bool=#æ‰“å°llama.cppè¯»å–æ¨¡å‹æ—¶çš„æ—¥å¿—
)
tools = Tools()
prompt = Prompt()
#å°†ä¸Šé¢çš„ç¤ºä¾‹ä»¥å‚æ•°çš„æ–¹å¼ä¼ é€’ç»™Agent
agent = Agent(
    LLM = llm,
    tools = tools,
    prompt = prompt
)
```
ä¸Šé¢å°±æ˜¯ç®€å•çš„å®ä¾‹åŒ–ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œç›®å‰å®ƒåªæœ‰è®°å¿†ï¼Œå·¥å…·éœ€è¦ä½ è‡ªå·±è®¾è®¡ï¼Œæˆ–è€…åœ¨toolså®ä¾‹åŒ–æ—¶æŒ‡å®šå‚æ•°
```python
tools = Tools(
    isSystemTool=True,#å¯ç”¨ç³»ç»Ÿå·¥å…·
    isRAG=True,#å¯ç”¨RAGçš„æ¥å£
)
```
è™½ç„¶æˆ‘å«ä½œæ™ºèƒ½ä½“ï¼Œä½†æ˜¯ç›®å‰è¿˜æ˜¯å’ŒRLä¸­çš„æ™ºèƒ½ä½“æœ‰åŒºåˆ«ï¼Œç›®å‰å¥¹è¿˜æ— æ³•æ„ŸçŸ¥ç¯å¢ƒï¼Œä¸è¿‡æˆ‘å·²ç»åœ¨environment.pyé‡Œé¢åšå¥½äº†å¤šæ™ºèƒ½ä½“å’Œç¯å¢ƒæ„ŸçŸ¥çš„å‡†å¤‡
## Agentçš„æ–¹æ³•
### predict()æ–¹æ³•
å®é™…ä¸Šï¼Œä½ å¯ä»¥åƒä½¿ç”¨LLMä¸€æ ·ä½¿ç”¨Agent.\
æœ€åŸºç¡€è·å–è¾“å‡ºï¼Œå’ŒLLMä¸€æ ·çš„æ–¹æ³•è¿˜æ˜¯predict()æ–¹æ³•
```python
...
result = agent.predict(input_text="ä½ å¥½ï¼Ÿ")
#agent.predict()é»˜è®¤æµå¼è¾“å‡º
for chunk in result:
    print(chunk,end="")
...
```
```python
predict(
    input_text:str,#è¾“å…¥æ–‡æœ¬
    temperature:float,
    top_p:float,
    min_p:float,
    stream:bool=False,#æ˜¯å¦æµå¼è¾“å‡º
)
```
è™½ç„¶å’ŒLLMçš„æ–¹æ³•ä¸€è‡´ï¼Œä½†æ˜¯ä¸ä¸€æ ·çš„æ˜¯ï¼Œå½“å­˜åœ¨å·¥å…·å¹¶ä¸”LLMè°ƒç”¨å®ƒæ—¶ï¼ŒAgentä¼šæ‰§è¡Œå®Œå·¥å…·å,å°†ç»“æœæäº¤ç»™LLMï¼Œå†æ¬¡é€’å½’è°ƒç”¨predict()äº§ç”Ÿè¾“å‡ºã€‚
### readFile()æ–¹æ³•
è¯»å–æ–‡ä»¶å¹¶æäº¤åˆ°LLMçš„æ¶ˆæ¯åˆ—è¡¨
```python
agent.readFile(path="æ–‡ä»¶è·¯å¾„")
```
Agentä¼šåœ¨å†…éƒ¨è¯„ä¼°æ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡ä¸Šä¸‹æ–‡ï¼Œåˆ™ä¼šæ ¹æ®LLMçš„æœ€å¤§ä¸Šä¸‹æ–‡çš„ä¸€åŠè¯»å–æ–‡ä»¶
### remember()æ–¹æ³•
è®°å¿†ä¿¡æ¯
```python
agent.remember()#æ— å‚è°ƒç”¨ï¼Œä¼šä¸»åŠ¨è®°å¿†æ¶ˆæ¯ï¼Œç„¶åå­˜åœ¨æ–‡ä»¶é‡Œé¢ï¼Œä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™è¿˜ä¼šè®°å¾—ä¹‹å‰çš„å†…å®¹
agent.remember(message="ä½ å¥½ï¼Œæˆ‘æ˜¯tina")#æ‰‹åŠ¨è®°å¿†ä¿¡æ¯ï¼Œå½“æœ‰ä½ éœ€è¦æ‰‹åŠ¨è®°å¿†çš„ä¸œè¥¿çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•
``` 
### forget()æ–¹æ³•
é—å¿˜ä¿¡æ¯
```python
agent.forget()#æ— å‚è°ƒç”¨ï¼Œä¼šç›´æ¥æ¸…ç©ºå½“å‰å¯¹è¯çš„æ¶ˆæ¯åˆ—è¡¨
agent.forget(importance=1)#ä¼šé—å¿˜importanceå°äº1çš„è®°å¿†ï¼Œimportanceçš„èŒƒå›´ä¸º1-5
```
# äº”.RAGä¸æ–‡æ¡£å‘é‡åŒ–
RAGæ˜¯æ£€ç´¢ä¿¡æ¯å¢å¼ºæŠ€æœ¯ï¼Œä½¿ç”¨è¯¥åŠŸèƒ½å¯ä»¥åœ¨ä½ çš„æ–‡æ¡£ä¸­è¿›è¡Œæœç´¢ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ
## æ–‡æ¡£å‘é‡åŒ–-docToVec()å‡½æ•°
docToVec()å‡½æ•°å¯ä»¥å°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡ï¼Œå¹¶ä¿å­˜ä¸ºç´¢å¼•æ–‡ä»¶å’Œåˆ†æ®µæ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­çš„æ£€ç´¢ã€‚
```python
from tina.core.manage import TinaFolderManager
#å› ä¸ºæ–‡æ¡£å‘é‡åŒ–åä¼šäº§ç”Ÿä¸€ä»½ç´¢å¼•æ–‡ä»¶å’Œåˆ†æ®µæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¸ç„¶å°±ä¼šä¹±è·‘
TinaFolderManager.init(â€œä½ æƒ³æŠŠæ–‡ä»¶æ”¾åœ¨å“ªé‡Œï¼Ÿâ€)
from tina.RAG.Embedding.docToVec import docToVec
#docToVecåªæ˜¯ä¸€ä¸ªå‡½æ•°
docToVec(
    file_path="æ–‡æ¡£æ–‡ä»¶å¤¹çš„è·¯å¾„",
    model_path="å‘é‡æ¨¡å‹è·¯å¾„",
    dimesion=768,#å‘é‡ç»´åº¦
    n = 500,#åˆ†æ®µçš„æ¯æ®µå­—æ•°
    isCopyToTinaFolder=True,#æ˜¯å¦æŠŠåŸæ–‡ä»¶å¤åˆ¶åˆ°tinaçš„æ–‡ä»¶å¤¹
)
```
## åœ¨æ–‡æ¡£é‡Œæœç´¢-query()å‡½æ•°
query()å‡½æ•°å¯ä»¥æ£€ç´¢æ–‡æ¡£å‘é‡åŒ–åçš„ç´¢å¼•æ–‡ä»¶ï¼Œå¹¶è¿”å›ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µã€‚
```python
#åœ¨ä¹‹å‰ä½¿ç”¨è¿‡docToVec()ä¹‹åæ‰å¯ä»¥ä½¿ç”¨
...
from tina.RAG.query.query import query
result = query(
    query_text="ä½ å¥½ï¼Œæˆ‘æ˜¯tina",
    n=5,#è¿”å›çš„ç»“æœæ•°
)
```
## ä½¿ç”¨å‘é‡æ¨¡å‹-Embedding()ç±»
Embedding()ç±»å¯ä»¥åˆ›å»ºä¸€ä¸ªå‘é‡æ¨¡å‹å¯¹è±¡
```python
from tina.RAG.Embedding.embedding import Embedding
embedding = Embedding(
    model_path="å‘é‡æ¨¡å‹è·¯å¾„"
)
```
è¯¥ç±»çš„ä½¿ç”¨ï¼Œæš‚æ—¶ä¸è¿‡å¤šå±•ç¤ºï¼Œå› ä¸ºè¿™æ–¹é¢çš„ä»£ç æˆ‘å†™çš„è¿˜ä¸å¤Ÿå®Œå–„ğŸ˜³ï¼Œåç»­ä¼šé€æ­¥å®Œå–„ã€‚
