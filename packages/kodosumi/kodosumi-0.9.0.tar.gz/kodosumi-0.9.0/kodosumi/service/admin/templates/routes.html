{% extends "_frame.html" %}

{% block styles %}
{% endblock %}

{% block menu %}
<h3>Agentic Control</h3>
<div class="max"></div>
<div class="tabs right-align" style="height: 50px;">
</div>
{% endblock %}

{% block details %}
{% endblock %}

{% block page %}
<div class="active page">
    <div class="max large-margin large-padding article-container" style="">
        <h5>Routes</h5>
        <p>
            The following agentic nodes have been registered. <br/>
            The endpoints either address an <code>/openapi.json</code> endpoint 
            or a <span class="italic">Ray</span><code>/-/routes</code> endpoint.
        </p>
        <form method="POST">
            <div class="field textarea border extra">
                <textarea name="routes">{{ items | join("\n") }}</textarea>
            </div>
            {% if routes %}
            <h5 class="small">Reconnected Service Routes:</h5>
            <div class="space"></div>
            {% for route in routes %}
            <details>
                <summary>
                    <i class="small">expand_content</i>
                    <bold>
                        {{ route }}
                    </bold>
                </summary>
                <p><article><pre style="font-family: monospace; white-space: pre-wrap;">{{ routes[route] | tojson(indent=2) }}</article></pre></p>
            </details>
            {% endfor %}
            <div class="space"></div>
            {% endif %}
            <button class="tertiary" type="submit">Reconnect</button>
        </form>
        <div class="space"></div>
        <div class="large-divider"></div>
        <h5>Help</h5>
        <p>
            <a target="_blank" href="/schema/swagger">Swagger UI</a>
        </p>
    </div>
</div>
{% endblock %}

{% block script %}
{% endblock %}
