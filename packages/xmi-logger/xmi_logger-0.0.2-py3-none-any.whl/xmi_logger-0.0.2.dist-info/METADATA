Metadata-Version: 2.4
Name: xmi_logger
Version: 0.0.2
Summary: An enhanced logger based on Loguru
Home-page: https://github.com/wang-zhibo/xmi_logger
Author: gm.zhibo.wang
Author-email: gm.zhibo.wang@gmail.com
Project-URL: Bug Reports, https://github.com/wang-zhibo/xmi_logger/issues
Project-URL: Source, https://github.com/wang-zhibo/xmi_logger
Classifier: Programming Language :: Python :: 3
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: loguru==0.7.3
Requires-Dist: requests
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: project-url
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# XmiLogger

åŸºäº Loguru çš„å¢å¼ºæ—¥å¿—è®°å½•å™¨ï¼Œæ”¯æŒå¤šè¯­è¨€ã€å¼‚æ­¥æ“ä½œå’Œé«˜çº§ç»Ÿè®¡åŠŸèƒ½ã€‚

## ç‰¹æ€§

- ğŸš€ é«˜æ€§èƒ½ï¼šä½¿ç”¨ LRU ç¼“å­˜å’Œå¼‚æ­¥å¤„ç†
- ğŸŒ å¤šè¯­è¨€æ”¯æŒï¼šæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æ—¥å¿—è¾“å‡º
- ğŸ“Š é«˜çº§ç»Ÿè®¡ï¼šæ”¯æŒæ—¥å¿—åˆ†ç±»ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ
- ğŸ”„ å¼‚æ­¥æ”¯æŒï¼šæ”¯æŒå¼‚æ­¥å‡½æ•°æ—¥å¿—è®°å½•
- ğŸ“ è‡ªå®šä¹‰æ ¼å¼ï¼šæ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼
- ğŸ”’ å®‰å…¨æ€§ï¼šå†…ç½®é”™è¯¯å¤„ç†å’Œé…ç½®éªŒè¯
- ğŸ“¦ æ—¥å¿—è½®è½¬ï¼šæ”¯æŒæŒ‰å¤§å°å’Œæ—¶é—´è½®è½¬
- ğŸŒ è¿œç¨‹æ—¥å¿—ï¼šæ”¯æŒå¼‚æ­¥è¿œç¨‹æ—¥å¿—æ”¶é›†

## å®‰è£…

```bash
pip install xmi-logger
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from xmi_logger import XmiLogger

# åˆ›å»ºæ—¥å¿—è®°å½•å™¨å®ä¾‹
logger = XmiLogger(
    file_name="app",
    log_dir="logs",
    language="zh"  # ä½¿ç”¨ä¸­æ–‡è¾“å‡º
)

# è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—
logger.info("è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—")
logger.warning("è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—")
logger.error("è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—")
```

### å¼‚æ­¥å‡½æ•°æ”¯æŒ

```python
import asyncio

@logger.log_decorator()
async def async_function():
    await asyncio.sleep(1)
    return "å¼‚æ­¥æ“ä½œå®Œæˆ"

# ä½¿ç”¨å¼‚æ­¥å‡½æ•°
async def main():
    result = await async_function()
    logger.info(f"å¼‚æ­¥å‡½æ•°ç»“æœ: {result}")

asyncio.run(main())
```

### è¿œç¨‹æ—¥å¿—æ”¶é›†

```python
logger = XmiLogger(
    file_name="app",
    remote_log_url="https://your-log-server.com/logs",
    max_workers=3
)
```

### æ—¥å¿—ç»Ÿè®¡åŠŸèƒ½

```python
# å¯ç”¨ç»Ÿè®¡åŠŸèƒ½
logger = XmiLogger(
    file_name="app",
    enable_stats=True
)

# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = logger.get_stats()
print(logger.get_stats_summary())

# è·å–é”™è¯¯è¶‹åŠ¿
error_trend = logger.get_error_trend()

# è·å–åˆ†ç±»åˆ†å¸ƒ
category_dist = logger.get_category_distribution()
```

## é«˜çº§é…ç½®

### å®Œæ•´é…ç½®ç¤ºä¾‹

```python
logger = XmiLogger(
    file_name="app",                    # æ—¥å¿—æ–‡ä»¶å
    log_dir="logs",                     # æ—¥å¿—ç›®å½•
    max_size=14,                        # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰
    retention="7 days",                 # æ—¥å¿—ä¿ç•™æ—¶é—´
    remote_log_url=None,                # è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨URL
    max_workers=3,                      # è¿œç¨‹æ—¥å¿—å‘é€çº¿ç¨‹æ•°
    work_type=False,                    # å·¥ä½œæ¨¡å¼ï¼ˆFalseä¸ºæµ‹è¯•ç¯å¢ƒï¼‰
    language="zh",                      # æ—¥å¿—è¯­è¨€ï¼ˆzh/enï¼‰
    rotation_time="1 day",              # æ—¥å¿—è½®è½¬æ—¶é—´
    custom_format=None,                 # è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼
    filter_level="DEBUG",               # æ—¥å¿—è¿‡æ»¤çº§åˆ«
    compression="zip",                  # æ—¥å¿—å‹ç¼©æ ¼å¼
    enable_stats=False,                 # æ˜¯å¦å¯ç”¨ç»Ÿè®¡
    categories=None,                    # æ—¥å¿—åˆ†ç±»åˆ—è¡¨
    cache_size=128                      # ç¼“å­˜å¤§å°
)
```

### è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼

```python
custom_format = (
    "<green>{time:YYYY-MM-DD HH:mm:ss}</green> | "
    "<level>{level: <8}</level> | "
    "ReqID:{extra[request_id]} | "
    "<cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> - "
    "<level>{message}</level>"
)

logger = XmiLogger(
    file_name="app",
    custom_format=custom_format
)
```

## ä¸»è¦åŠŸèƒ½

### 1. æ—¥å¿—è®°å½•
- æ”¯æŒæ‰€æœ‰æ ‡å‡†æ—¥å¿—çº§åˆ«ï¼ˆDEBUG, INFO, WARNING, ERROR, CRITICALï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—çº§åˆ«
- æ”¯æŒå¸¦æ ‡ç­¾å’Œåˆ†ç±»çš„æ—¥å¿—è®°å½•

### 2. æ—¥å¿—ç®¡ç†
- è‡ªåŠ¨æ—¥å¿—è½®è½¬
- æ—¥å¿—å‹ç¼©
- æ—¥å¿—ä¿ç•™ç­–ç•¥
- å¤šæ–‡ä»¶è¾“å‡ºï¼ˆæŒ‰çº§åˆ«åˆ†æ–‡ä»¶ï¼‰

### 3. ç»Ÿè®¡åŠŸèƒ½
- æ—¥å¿—æ€»æ•°ç»Ÿè®¡
- é”™è¯¯ç‡ç»Ÿè®¡
- æŒ‰ç±»åˆ«ç»Ÿè®¡
- æŒ‰æ—¶é—´ç»Ÿè®¡
- é”™è¯¯è¶‹åŠ¿åˆ†æ

### 4. è¿œç¨‹æ—¥å¿—
- å¼‚æ­¥è¿œç¨‹æ—¥å¿—å‘é€
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- çº¿ç¨‹æ± ç®¡ç†
- é”™è¯¯å¤„ç†

### 5. è£…é¥°å™¨æ”¯æŒ
- å‡½æ•°æ‰§è¡Œæ—¶é—´è®°å½•
- å¼‚å¸¸æ•è·å’Œè®°å½•
- æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥å‡½æ•°

## é”™è¯¯å¤„ç†

```python
try:
    logger = XmiLogger("app", log_dir="/path/to/logs")
except RuntimeError as e:
    print(f"æ—¥å¿—é…ç½®å¤±è´¥: {e}")
```

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æ—¥å¿—ç›®å½•å…·æœ‰å†™å…¥æƒé™
2. è¿œç¨‹æ—¥å¿—URLå¿…é¡»æ˜¯æœ‰æ•ˆçš„HTTP(S)åœ°å€
3. å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ç»Ÿè®¡åŠŸèƒ½
4. å¼‚æ­¥æ“ä½œæ—¶æ³¨æ„æ­£ç¡®å¤„ç†å¼‚å¸¸

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

