import{v,w as T}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as U,i as V,o as C,t as g}from"./user.TOXT8CXA.js";/* empty css                          */import{_ as h}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{h as n,c as B,a as o,b as i,bh as E,d as L,i as W,m as u,w as y,l as w,r as m,g as x,o as q}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{u as p}from"./index.CwJxcYEt.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";const D={},M={class:"infoBox"},N={class:"infoBox__content"};function Y(l,e){return n(),B("div",M,[e[0]||(e[0]=o("span",{class:"infoBox__trigger"},[i(" ? "),o("span",{class:"screen-reader-text"}," Hover for additional information ")],-1)),o("div",N,[E(l.$slots,"default")])])}const z=h(D,[["render",Y]]),F=L({__name:"RegistrationForm",setup(l,{expose:e}){e();const r=p(U),t=p(V),d=p(C),a=m(null),s=()=>{let S=window.location,b=new URLSearchParams(S.search);b.has("context")&&(a.value=b.get("context"))},c=m(r.value.profile.username),f=m(r.value.profile.email),k=x(()=>r.value.profile.email!==""),I=async()=>{await g(a.value),t&&d.value?location.replace("/"):location.replace("/login?s=failed")},R=x(()=>a.value===null||c.value===""||f.value==="");q(async()=>{await s(),await g(a.value)});const _={useUser:r,useIsLoggedIn:t,useOrganizationToken:d,context:a,getContext:s,username:c,email:f,hasEmail:k,proceed:I,isSubmitDisabled:R,InfoBox:z};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),G={class:"register form"},H={class:"inputWrapper"},O={for:"username"},P={class:"inputWrapper"},j={for:"email"},A={class:"inputWrapper"},J=["disabled"];function K(l,e,r,t,d,a){return n(),B("form",G,[o("div",H,[o("label",O,[e[3]||(e[3]=i(" Username ")),W(t.InfoBox,null,{default:u(()=>e[2]||(e[2]=[i(" The username we received from your authentication provider (GitHub, Google...) will be used as your Reliably username. ")])),_:1})]),y(o("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":e[0]||(e[0]=s=>t.username=s),readonly:""},null,512),[[v,t.username]])]),o("div",P,[o("label",j,[e[6]||(e[6]=i(" Email ")),e[7]||(e[7]=o("span",{class:"required"},"Required",-1)),t.hasEmail?(n(),w(t.InfoBox,{key:0},{default:u(()=>e[4]||(e[4]=[o("p",null," Your email will only be used by Reliably to send you alerts and important messages. It will not be used for marketing purposes nor shared with third parties. ",-1),o("p",null," You can change it if you don't want to use this particular email address. ",-1)])),_:1})):(n(),w(t.InfoBox,{key:1},{default:u(()=>e[5]||(e[5]=[o("p",null," We could not retrieve an email address from your authentication provider. ",-1),o("p",null," Your email will only be used by Reliably to send you alerts and important messages. It will not be used for marketing purposes nor shared with third parties. ",-1)])),_:1}))]),y(o("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>t.email=s),required:""},null,512),[[v,t.email]])]),o("div",A,[o("button",{onClick:T(t.proceed,["prevent"]),disabled:t.isSubmitDisabled,class:"button button--primary"}," Register ",8,J)])])}const re=h(F,[["render",K],["__scopeId","data-v-45f761a3"]]);export{re as default};
