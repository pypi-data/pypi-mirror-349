import{v as c,w as L}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as P}from"./integrations.Be-n79W6.js";import{_ as U}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as N,c as s,a,b as t,w as _,e as T,n as E,r as o,g as w,h as u}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import"./user.DMXaCJik.js";import"./user.TOXT8CXA.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./index.CwJxcYEt.js";const C=N({__name:"GrafanaIntegrationForm",setup(y,{expose:n}){n();const i=o(""),e=o(!0);function V(){i.value===""?e.value=!1:e.value=!0}const l=o(""),r=o(!0);function O(){l.value===""?r.value=!1:r.value=!0}const p=o(""),d=o(!0),b=o("");function R(){p.value===""?(d.value=!1,b.value="The username is the instance ID of the Grafana instance."):(d.value=!0,b.value="")}const m=o(""),v=o(!0),g=o("");function W(){m.value===""?(v.value=!1,g.value="The password is a cloud access policy token."):(v.value=!0,g.value="")}const f=o(!1),h=w(()=>f.value||!e.value||i.value===""||!r.value||l.value===""||!v.value||m.value===""||!d.value||p.value==="");async function B(){if(!h.value){f.value=!0;const q={name:i.value,provider:"opentelemetry",vendor:"grafana",environment:{name:"otel",used_for:"integration",envvars:[{var_name:"OTEL_VENDOR",value:"grafana"},{var_name:"OTEL_EXPORTER_OTLP_TRACES_PROTOCOL",value:"http/protobuf"},{var_name:"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT",value:l.value}],secrets:[{key:"otel-headers",var_name:"OTEL_EXPORTER_OTLP_TRACES_HEADERS",value:"Authorization="+encodeURIComponent("Basic ")+window.btoa(`${p.value}:${m.value}`)}]}};await P(q),f.value=!1}}const k={name:i,isNameValid:e,onNameBlur:V,endpoint:l,isEndpointValid:r,onEndpointBlur:O,username:p,isUsernameValid:d,invalidUsernameMessage:b,onUsernameBlur:R,token:m,isTokenValid:v,invalidTokenMessage:g,onTokenBlur:W,isCreating:f,isSubmitDisabled:h,create:B};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),S={class:"integrationForm form"},x={key:0,class:"inputWrapper__help inputWrapper__help--error"},M={key:0,class:"inputWrapper__help inputWrapper__help--error"},D=["innerHTML"],A=["innerHTML"],G={class:"inputWrapper"},H=["disabled"];function I(y,n,i,e,V,l){return u(),s("form",S,[a("div",{class:E(["inputWrapper",{"inputWrapper--error":!e.isNameValid}])},[n[4]||(n[4]=a("label",{for:"name"},[t("Name "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":n[0]||(n[0]=r=>e.name=r),onBlur:e.onNameBlur,placeholder:"Send traces to Grafana",required:""},null,544),[[c,e.name]]),e.isNameValid?T("",!0):(u(),s("p",x," A name for your integration is required. "))],2),a("div",{class:E(["inputWrapper",{"inputWrapper--error":!e.isEndpointValid}])},[n[6]||(n[6]=a("label",{for:"endpoint"},[t(" Traces Endpoint "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"text",name:"endpoint",id:"endpoint","onUpdate:modelValue":n[1]||(n[1]=r=>e.endpoint=r),onBlur:e.onEndpointBlur,placeholder:"https://otlp-gateway-<zone>.grafana.net/otlp/v1/traces",required:""},null,544),[[c,e.endpoint]]),e.isEndpointValid?T("",!0):(u(),s("p",M,n[5]||(n[5]=[t(" The Grafana OTLP traces endpoint is required. Supported zones can be found on "),a("a",{href:"https://grafana.com/docs/grafana-cloud/monitor-infrastructure/otlp/send-data-otlp/#before-you-begin"},"Grafana documentation",-1),t("."),a("br",null,null,-1),t(" For OTLP/HTTPS: "),a("code",null,"https://otlp-gateway-[zone].grafana.net/otlp/v1/traces",-1)])))],2),a("div",{class:E(["inputWrapper",{"inputWrapper--error":!e.isUsernameValid}])},[n[7]||(n[7]=a("label",{for:"headers"},[t(" Username "),a("span",{class:"required"}," Required")],-1)),_(a("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":n[2]||(n[2]=r=>e.username=r),onBlur:e.onUsernameBlur,autocomplete:"off",required:""},null,544),[[c,e.username]]),e.isUsernameValid?T("",!0):(u(),s("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidUsernameMessage},null,8,D))],2),a("div",{class:E(["inputWrapper",{"inputWrapper--error":!e.isTokenValid}])},[n[8]||(n[8]=a("label",{for:"headers"},[t(" Password "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"text",name:"headers",id:"headers","onUpdate:modelValue":n[3]||(n[3]=r=>e.token=r),onBlur:e.onTokenBlur,autocomplete:"off",required:""},null,544),[[c,e.token]]),e.isTokenValid?T("",!0):(u(),s("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidTokenMessage},null,8,A))],2),a("div",G,[a("button",{onClick:L(e.create,["prevent"]),disabled:e.isSubmitDisabled,class:"button button--primary"}," Create ",8,H)])])}const ee=U(C,[["render",I]]);export{ee as default};
