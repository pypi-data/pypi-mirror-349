import{v as b,w as N}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as g}from"./integrations.Be-n79W6.js";import{_ as x}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as I,c as p,a,b as o,w as _,e as A,n as c,r as l,g as i,h as m}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import"./user.DMXaCJik.js";import"./user.TOXT8CXA.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./index.CwJxcYEt.js";const H="Pauses can only be between 0 and 3600 seconds.",q=I({__name:"ReliablyAutoPauseForm",setup(V,{expose:r}){r();function E(t){t.value=Math.floor(t.value),t.value<0?t.value=0:t.value>3600&&(t.value=3600)}const e=l(""),v=l(!0);function B(){e.value===""?v.value=!1:v.value=!0}const n=l(120),S=i(()=>n.value>0),h=i(()=>n.value>=0&&n.value<=3600),u=l(120),P=i(()=>u.value>0),L=i(()=>u.value>=0&&u.value<=3600),s=l(120),M=i(()=>s.value>0),R=i(()=>s.value>=0&&s.value<=3600),d=l(120),T=i(()=>d.value>0),U=i(()=>d.value>=0&&d.value<=3600),f=l(!1),W=i(()=>f.value||!v.value||e.value===""||!R.value||!L.value||!h.value||!U.value);function D(t){return t?"1":"0"}const y=l([n,u,s,d]);async function k(){if(!W.value){f.value=!0;const t={name:e.value,provider:"autopause",vendor:"reliably",environment:{name:e.value,used_for:"integration",envvars:[{var_name:"RELIABLY_AUTOPAUSE_SSH_ENABLED",value:D(S.value)},{var_name:"RELIABLY_AUTOPAUSE_ROLLBACKS_ENABLED",value:D(T.value)},{var_name:"RELIABLY_AUTOPAUSE_METHOD_ACTION_ENABLED",value:D(P.value)},{var_name:"RELIABLY_AUTOPAUSE_METHOD_PROBE_ENABLED",value:D(M.value)},{var_name:"RELIABLY_AUTOPAUSE_SSH_DURATION",value:d.value.toString()},{var_name:"RELIABLY_AUTOPAUSE_ROLLBACKS_DURATION",value:n.value.toString()},{var_name:"RELIABLY_AUTOPAUSE_METHOD_ACTION_DURATION",value:u.value.toString()},{var_name:"RELIABLY_AUTOPAUSE_METHOD_PROBE_DURATION",value:s.value.toString()}],secrets:[]}};await g(t),f.value=!1}}const O={invalidDurationMessage:H,onDurationBlur:E,name:e,isNameValid:v,onNameBlur:B,sshDuration:n,sshEnabled:S,isSSHDurationValid:h,methodActionDuration:u,methodActionEnabled:P,isMethodActionDurationValid:L,methodProbeDuration:s,methodProbeEnabled:M,isMethodProbeDurationValid:R,rollbacksDuration:d,rollbacksEnabled:T,isRollbacksDurationValid:U,isCreating:f,isSubmitDisabled:W,booleanToString:D,durations:y,create:k};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),C={class:"integrationForm form"},Y={key:0,class:"inputWrapper__help inputWrapper__help--error"},w={class:"inputWrapper"},F=["disabled"];function K(V,r,E,e,v,B){return m(),p("form",C,[a("div",{class:c(["inputWrapper",{"inputWrapper--error":!e.isNameValid}])},[r[9]||(r[9]=a("label",{for:"name"},[o("Name "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":r[0]||(r[0]=n=>e.name=n),onBlur:e.onNameBlur,placeholder:"Autopause Execution",required:""},null,544),[[b,e.name]]),e.isNameValid?A("",!0):(m(),p("p",Y," A name for your integration is required. "))],2),a("div",{class:c(["inputWrapper",{"inputWrapper--error":!e.isSSHDurationValid}])},[r[10]||(r[10]=a("label",{for:"sshDuration"},[o(" Steady-State Hypothesis Pauses Duration "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"number",name:"sshDuration",id:"sshDuration","onUpdate:modelValue":r[1]||(r[1]=n=>e.sshDuration=n),onBlur:r[2]||(r[2]=n=>e.onDurationBlur(e.durations[0])),min:"0",max:"3600",step:"1"},null,544),[[b,e.sshDuration]]),r[11]||(r[11]=a("p",{class:"inputWrapper__help"},[o(" Duration of the pause after each steady-state hypothesis probe, in seconds."),a("br"),o("Maximum duration is 3600 seconds. 0 to disable. ")],-1)),e.isSSHDurationValid?A("",!0):(m(),p("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidDurationMessage}))],2),a("div",{class:c(["inputWrapper",{"inputWrapper--error":!e.isMethodActionDurationValid}])},[r[12]||(r[12]=a("label",{for:"methodActionDuration"},[o(" Method Action Pauses Duration "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"number",name:"methodActionDuration",id:"methodActionDuration","onUpdate:modelValue":r[3]||(r[3]=n=>e.methodActionDuration=n),onBlur:r[4]||(r[4]=n=>e.onDurationBlur(e.durations[1])),min:"0",max:"3600",step:"1"},null,544),[[b,e.methodActionDuration]]),r[13]||(r[13]=a("p",{class:"inputWrapper__help"},[o(" Duration of the pause after each method action, in seconds."),a("br"),o("Maximum duration is 3600 seconds. 0 to disable. ")],-1)),e.isMethodActionDurationValid?A("",!0):(m(),p("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidDurationMessage}))],2),a("div",{class:c(["inputWrapper",{"inputWrapper--error":!e.isMethodProbeDurationValid}])},[r[14]||(r[14]=a("label",{for:"methodProbeDuration"},[o(" Method Probe Pauses Duration "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"number",name:"methodProbeDuration",id:"methodProbeDuration","onUpdate:modelValue":r[5]||(r[5]=n=>e.methodProbeDuration=n),onBlur:r[6]||(r[6]=n=>e.onDurationBlur(e.durations[2])),min:"0",max:"3600",step:"1"},null,544),[[b,e.methodProbeDuration]]),r[15]||(r[15]=a("p",{class:"inputWrapper__help"},[o(" Duration of the pause after each method probe, in seconds."),a("br"),o("Maximum duration is 3600 seconds. 0 to disable. ")],-1)),e.isMethodProbeDurationValid?A("",!0):(m(),p("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidDurationMessage}))],2),a("div",{class:c(["inputWrapper",{"inputWrapper--error":!e.isRollbacksDurationValid}])},[r[16]||(r[16]=a("label",{for:"rollbacksDuration"},[o(" Rollback Pauses Duration "),a("span",{class:"required"},"Required")],-1)),_(a("input",{type:"number",name:"rollbacksDuration",id:"rollbacksDuration","onUpdate:modelValue":r[7]||(r[7]=n=>e.rollbacksDuration=n),onBlur:r[8]||(r[8]=n=>e.onDurationBlur(e.durations[3])),min:"0",max:"3600",step:"1"},null,544),[[b,e.rollbacksDuration]]),r[17]||(r[17]=a("p",{class:"inputWrapper__help"},[o(" Duration of the pause after each rollback action, in seconds."),a("br"),o("Maximum duration is 3600 seconds. 0 to disable. ")],-1)),e.isRollbacksDurationValid?A("",!0):(m(),p("p",{key:0,class:"inputWrapper__help inputWrapper__help--error",innerHTML:e.invalidDurationMessage}))],2),a("div",w,[a("button",{onClick:N(e.create,["prevent"]),disabled:e.isSubmitDisabled,class:"button button--primary"}," Create ",8,F)])])}const ae=x(q,[["render",K]]);export{ae as default};
