import{e as x,f as M}from"./deployments._Dzuk3-5.js";import{w as N}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{G as B}from"./GithubLogo.AFEE3hFH.js";import{R}from"./ReliablyRLogo.BeZqNTy5.js";import{D as S}from"./DockerLogo.DO2Y8vmm.js";import{K as T}from"./KubernetesLogo.HTj9OyEL.js";import{T as E}from"./TimeAgo.hHi23vP_.js";import{D as j}from"./DeleteButton.Ch6PF2gM.js";import{M as V}from"./ModalWindow.Go1bYN-e.js";import{C as F}from"./ConfirmDeleteDeployment.BKz9opep.js";import{a as G}from"./strings.Fm4VVZpd.js";/* empty css                       */import{_ as P}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as C,t as K,g as D,r as f,h as t,c as o,a as r,i as a,e as v,j as d,b as L,l as g,m as k,f as A,F as w,k as I,o as z}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{E as O}from"./EntityFilter.DE3cAZtq.js";import{L as W}from"./LoadingPlaceholder.BoWrztnb.js";import{P as H}from"./Pager.Cmasf88E.js";import{N as U}from"./NoData.CWOJbPLy.js";import{u as q}from"./index.CwJxcYEt.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./dayjs.min.xlbmdZiw.js";import"./TrashIcon.BzGEjUcP.js";import"./index.DUHDLdXK.js";import"./CloseIcon.DLOPA8gH.js";/* empty css                        *//* empty css                       */import"./duration.BGVtNWJ9.js";/* empty css                       *//* empty css                       *//* empty css                       *//* empty css                        */const J=C({__name:"DeploymentPreview",props:{deployment:{},page:{}},setup(u,{expose:l}){l();const n=u,{deployment:e,page:i}=K(n),m=D(()=>e.value.definition.type==="github"?G(e.value.definition.repo):null),s=D(()=>((e.value?.definition).mode||"manual")=="manual"?"Manual":"Managed"),p=f(!1),_={props:n,deployment:e,page:i,repository:m,runMode:s,isDeleteDisplayed:p,displayDelete:()=>{p.value=!0},closeDelete:()=>{p.value=!1},GithubLogo:B,ReliablyLogo:R,DockerLogo:S,KubernetesLogo:T,TimeAgo:E,DeleteButton:j,ModalWindow:V,ConfirmDeleteDeployment:F};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),Q={class:"deploymentPreview tableList__row"},X={class:"tableList__cell tableList__cell--center tableList__cell--status deploymentPreview__icon"},Y={key:0,title:"GitHub Deployment"},Z={key:1,title:"Reliably Deployment"},$={key:2,title:"Reliably CLI Deployment"},ee={key:3,title:"Docker Container Deployment"},te={key:4,title:"Kubernetes Deployment"},oe={class:"tableList__cell deploymentPreview__name"},le=["href"],ie={key:0,class:"tableList__cell deploymentPreview__repo"},ae=["href"],ne={key:1,class:"tableList__cell deploymentPreview__repo"},re={key:2,class:"tableList__cell deploymentPreview__repo"},se={key:3,class:"tableList__cell deploymentPreview__repo"},de={key:4},me={class:"tableList__cell tableList__cell--small"};function pe(u,l,n,e,i,m){return t(),o("li",Q,[r("div",X,[e.deployment.definition.type==="github"?(t(),o("span",Y,[a(e.GithubLogo)])):e.deployment.definition.type==="reliably_cloud"?(t(),o("span",Z,[a(e.ReliablyLogo)])):e.deployment.definition.type==="reliably_cli"?(t(),o("span",$,[a(e.ReliablyLogo)])):e.deployment.definition.type==="container"?(t(),o("span",ee,[a(e.DockerLogo)])):e.deployment.definition.type==="k8s_job"?(t(),o("span",te,[a(e.KubernetesLogo)])):v("",!0)]),r("div",oe,[r("a",{href:`/deployments/view?id=${e.deployment.id}`},d(e.deployment.name),9,le),r("small",null,[l[0]||(l[0]=L("Created ")),a(e.TimeAgo,{timestamp:e.deployment.created_date},null,8,["timestamp"])])]),e.deployment.definition.type==="github"?(t(),o("div",ie,[r("a",{href:e.deployment.definition.repo,target:"_blank",rel:"noreferer noopener"},[L(d(e.repository.organization)+"/",1),r("strong",null,d(e.repository.repository),1)],8,ae),r("small",null," Environment: "+d(e.deployment.definition.name),1)])):e.deployment.definition.type==="container"?(t(),o("div",ne,d(e.deployment.definition.image),1)):e.deployment.definition.type==="k8s_job"?(t(),o("div",re,d(e.deployment.definition.namespace),1)):e.deployment.definition.type==="reliably_cli"?(t(),o("div",se,d(e.runMode),1)):(t(),o("div",de)),r("div",me,[a(e.DeleteButton,{onClick:N(e.displayDelete,["prevent"])})]),e.isDeleteDisplayed?(t(),g(e.ModalWindow,{key:5,hasCloseButton:!0,hasPadding:!0,onClose:e.closeDelete},{title:k(()=>l[1]||(l[1]=[L("Delete Experiment")])),content:k(()=>[a(e.ConfirmDeleteDeployment,{id:e.deployment.id,page:e.page,"in-place":!0,onClose:e.closeDelete},null,8,["id","page"])]),_:1})):v("",!0)])}const ce=P(J,[["render",pe],["__scopeId","data-v-752cb25e"]]),_e=C({__name:"DeploymentsList",setup(u,{expose:l}){l();const n=f(!0),e=f(void 0),i=f(""),m=f({currentPage:1,lastPage:1,urlBase:""}),s=q(x),p=()=>{let y=window.location,c=new URLSearchParams(y.search);c.has("page")?e.value=parseInt(c.get("page")):e.value=1,c.has("search")?i.value=c.get("search"):i.value=""},b=()=>{let y="/deployments/?page=";i.value!==""&&(y=`/deployments/?search=${i.value}&page=`);let c={currentPage:e.value,lastPage:Math.ceil(s.value.total/10),urlBase:y};m.value=c};async function h(){n.value=!0,p(),await M(e.value,i.value),b(),n.value=!1}z(async()=>{await h()});const _={isLoading:n,page:e,searchTerm:i,pagerData:m,deploys:s,getParams:p,getPagerData:b,refreshList:h,DeploymentPreview:ce,EntityFilter:O,LoadingPlaceholder:W,Pager:H,NoData:U};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),ye={key:2,class:"experimentsList tableList"};function fe(u,l,n,e,i,m){return t(),o(w,null,[a(e.EntityFilter,{onSearch:e.refreshList}),e.isLoading?(t(),g(e.LoadingPlaceholder,{key:0,size:"large"})):v("",!0),e.deploys.total===0?(t(),g(e.NoData,{key:1,message:"No deployments found"})):(t(),o("ul",ye,[l[0]||(l[0]=A('<li class="tableList__row tableList__row--header"><div class="tableList__cell tableList__cell--center tableList__cell--status"></div><div class="tableList__cell">Name</div><div class="tableList__cell">Target</div><div class="tableList__cell"><span class="screen-reader-text">Actions</span></div></li>',1)),(t(!0),o(w,null,I(e.deploys.deployments,s=>(t(),g(e.DeploymentPreview,{deployment:s,page:e.page,key:s.id,class:"tableList__row"},null,8,["deployment","page"]))),128))])),e.deploys.total>10?(t(),g(e.Pager,{key:3,page:e.pagerData},null,8,["page"])):v("",!0)],64)}const Ye=P(_e,[["render",fe]]);export{Ye as default};
