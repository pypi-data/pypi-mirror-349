import{f as ce,s as ue}from"./strings.Fm4VVZpd.js";import{b as pe,e as fe}from"./experiments.E3MiUWYx.js";import{g as _e,f as me,e as he,a as ve,b as xe}from"./executions.DP8bhDFR.js";import{s as ye,f as be}from"./scenarios.Bt8TSrLt.js";import{L as X}from"./LoadingPlaceholder.BoWrztnb.js";import{N as ge}from"./NoData.CWOJbPLy.js";import{M as N}from"./ModalWindow.Go1bYN-e.js";import{M as ke}from"./MultiButton.BdOjon-N.js";import{T as we}from"./TagList.DHWFg1rv.js";import{T as ne}from"./TimeAgo.hHi23vP_.js";import{J as z}from"./JsonViewer.CMLqmGhq.js";import{C as Ee,E as Se,a as Ce,b as Le}from"./ExperimentTrend.DSrZa87Y.js";import{H as Pe}from"./HelpCircle.XFsukWe6.js";/* empty css                      */import{_ as L}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as M,t as R,r as d,o as F,h as s,c as a,a as t,b as w,i as c,j as m,g as k,bi as De,l as h,e as f,F as C,k as W,m as S,n as Te,f as ie,p as Me}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{E as Ie}from"./ExecutionEnvironment.BMo3Ql6w.js";import{a as Ae}from"./contributions.K_0J8Jft.js";import{C as Be,R as Re}from"./index.B8cAO9n_.js";import{w as G}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{E as je}from"./ExecutionMiniStatus.DOYC0zW8.js";import{C as Oe}from"./ConfirmDeleteExecution.CvrzBu3R.js";import{D as Ve}from"./DeleteButton.Ch6PF2gM.js";import{P as qe}from"./Pager.Cmasf88E.js";import{r as We,b as He}from"./plans.CKfMLPs_.js";import{P as Ne}from"./PlanPreview.Zap9om5u.js";import{E as Fe}from"./EntityFilter.DE3cAZtq.js";import{u as K}from"./index.CwJxcYEt.js";import"./dayjs.min.xlbmdZiw.js";import"./duration.BGVtNWJ9.js";import"./notifications.NSMm1_5U.js";import"./index.BSdFiPHn.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./loader.BQDlK3Tc.js";import"./experiments.rwiqw3d6.js";import"./objects.CrQdKsRW.js";/* empty css                       *//* empty css                        */import"./index.DUHDLdXK.js";import"./CloseIcon.DLOPA8gH.js";/* empty css                        */import"./CopyIcon.CpId03NM.js";import"./TrashIcon.BzGEjUcP.js";import"./EditIcon.VtRJix1y.js";import"./PlusIcon.CLPjCzPo.js";/* empty css                      */import"./ChevronDown.BHvjSUQm.js";/* empty css                        */import"./js-yaml.C-pQuU5J.js";/* empty css                        */import"./preload-helper.CLcXU_4U.js";/* empty css                       */import"./CheckIcon.Cp1OA8SI.js";import"./XIcon.BeaDfJr1.js";/* empty css                      *//* empty css                       *//* empty css                       *//* empty css                       */import"./environments.zePoF_Ox.js";import"./deployments._Dzuk3-5.js";import"./ConfirmDeletePlan.Doxxn7Bj.js";/* empty css                      */import"./GithubLogo.AFEE3hFH.js";import"./ReliablyRLogo.BeZqNTy5.js";import"./DockerLogo.DO2Y8vmm.js";import"./KubernetesLogo.HTj9OyEL.js";/* empty css                      *//* empty css                       */const Je=M({__name:"ExperimentStrategy",props:{strategy:{}},setup(u,{expose:n}){n();const r=u,{strategy:e}=R(r),i=d({hypothesis:{strategy:"Before and after turbulence (default)",frequency:"-",fail_fast:"No"},rollbacks:{strategy:"If experiment didn't deviate (default)"}});function l(){e.value&&(e.value.hypothesis&&(e.value.hypothesis.strategy==="before-method-only"?i.value.hypothesis.strategy="Before turbulence":e.value.hypothesis.strategy==="after-method-only"?i.value.hypothesis.strategy="After turbulence":e.value.hypothesis.strategy==="continuously"?i.value.hypothesis.strategy="Continuously":e.value.hypothesis.strategy==="during-method-only"&&(i.value.hypothesis.strategy="Continuously during turbulence"),(e.value.hypothesis.strategy==="during-method-only"||e.value.hypothesis.strategy==="continuously")&&e.value.hypothesis.frequency&&(e.value.hypothesis.frequency>1?i.value.hypothesis.frequency=`Every ${e.value.hypothesis.frequency} seconds`:i.value.hypothesis.frequency=`Every ${e.value.hypothesis.frequency} second`,e.value.hypothesis.fail_fast&&(i.value.hypothesis.fail_fast="Yes"))),e.value.rollbacks&&(e.value.rollbacks.strategy==="always"?i.value.rollbacks.strategy="Always":e.value.rollbacks.strategy==="never"?i.value.rollbacks.strategy="Never":e.value.rollbacks.strategy==="deviated"&&(i.value.rollbacks.strategy="Only if experiment deviated")))}F(()=>{l()});const o={props:r,strategy:e,strategyObject:i,updateStrategyObject:l,HelpCircle:Pe};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),Ue={class:"experimentStrategy"},ze={class:"hasTooltip hasTooltip--top-center",label:"When the verification probes will run","aria-label":"When the verification probes will run"},Ge={class:"hasTooltip hasTooltip--top-center",label:"Number of seconds between two verification runs","aria-label":"Number of seconds between two verification runs"},Ye={class:"hasTooltip hasTooltip--top-center",label:"Should the experiment stop after a failed verification","aria-label":"Should the experiment stop after a failed verification"},Qe={class:"hasTooltip hasTooltip--top-center",label:"When the rollbacks will run","aria-label":"When the rollbacks will run"};function Ke(u,n,r,e,i,l){return s(),a("div",Ue,[t("div",null,[n[3]||(n[3]=t("h3",null,"Verification",-1)),t("dl",null,[t("div",null,[t("dt",null,[n[0]||(n[0]=w(" Strategy ")),t("span",ze,[c(e.HelpCircle)])]),t("dd",null,m(e.strategyObject.hypothesis.strategy),1)]),t("div",null,[t("dt",null,[n[1]||(n[1]=w(" Frequency ")),t("span",Ge,[c(e.HelpCircle)])]),t("dd",null,m(e.strategyObject.hypothesis.frequency),1)]),t("div",null,[t("dt",null,[n[2]||(n[2]=w(" Fail fast ")),t("span",Ye,[c(e.HelpCircle)])]),t("dd",null,m(e.strategyObject.hypothesis.fail_fast),1)])])]),t("div",null,[n[5]||(n[5]=t("h3",null,"Rollbacks",-1)),t("dl",null,[t("div",null,[t("dt",null,[n[4]||(n[4]=w(" Strategy ")),t("span",Qe,[c(e.HelpCircle)])]),t("dd",null,m(e.strategyObject.rollbacks.strategy),1)])])])])}const Xe=L(Je,[["render",Ke]]),Ze=M({__name:"ContributionsRadar",props:{contributions:{}},setup(u,{expose:n}){n();const{Chart:r,Title:e,Tooltip:i,Legend:l,PointElement:o,RadialLinearScale:_,LineElement:y,Filler:v}=Be;r.register(e,i,l,o,_,y,v);const x=u,{contributions:g}=R(x),P=d(!0),O=d(!1),I=d({labels:[],datasets:[{label:"Contribution",backgroundColor:"hsla(329,97%,55%,0.2)",borderColor:"hsl(329,97%,55%)",pointBackgroundColor:"hsl(329,97%,55%)",pointBorderColor:"white",pointHoverBackgroundColor:"white",pointHoverBorderColor:"hsl(329,97%,55%)",data:[]}]}),D=k(()=>g.value===void 0?!1:Object.keys(g.value).length>0),E=()=>{if(g.value!==void 0){const V=Object.keys(g.value);let T=[],B=[];V.forEach(j=>{let q=g.value[j];q==="none"?(T.push(0),B.push(j)):q==="low"?(T.push(1),B.push(j)):q==="medium"?(T.push(2),B.push(j)):q==="high"&&(T.push(3),B.push(j))}),I.value.datasets[0].data=T,I.value.labels=B,O.value=!0}},A={responsive:!0,scales:{r:{pointLabels:{font:{size:14}},ticks:{display:!1,stepSize:1}}},fill:!0,borderWidth:"1",plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{label:function(V){let T=V.formattedValue;return Ae(T)}}}}};F(()=>{P.value=!0,E(),P.value=!1});const H={Chart:r,Title:e,Tooltip:i,Legend:l,PointElement:o,RadialLinearScale:_,LineElement:y,Filler:v,props:x,contributions:g,isLoading:P,hasData:O,chartData:I,hasContributions:D,getData:E,chartOptions:A,get Radar(){return Re}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),$e={class:"contributionsRadar"},et={key:0},tt={key:1,class:"contributionsRadar__wrapper"};function nt(u,n,r,e,i,l){const o=De("LoadingPlaceholder");return s(),a("div",$e,[n[0]||(n[0]=t("h2",null,"Contributions",-1)),e.hasContributions?(s(),a("div",tt,[e.isLoading?(s(),h(o,{key:0,size:"fill"})):e.hasData?(s(),h(e.Radar,{key:1,data:e.chartData,options:e.chartOptions},null,8,["data"])):f("",!0)])):(s(),a("p",et," This experiment doesn't declare contributions. "))])}const it=L(Ze,[["render",nt],["__scopeId","data-v-c39efc8a"]]),st={},ot={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-right workflowArrow"};function at(u,n){return s(),a("svg",ot,n[0]||(n[0]=[t("line",{x1:"5",y1:"12",x2:"31",y2:"12"},null,-1),t("polyline",{points:"24 5 31 12 24 19"},null,-1)]))}const Z=L(st,[["render",at],["__scopeId","data-v-18b3c439"]]),lt=M({__name:"SshProbesList",props:{probes:{}},setup(u,{expose:n}){n();const r=u,{probes:e}=R(r),i=d(!1),l=d(""),o=d(""),v={props:r,probes:e,displayModal:i,modalContent:l,modalTitle:o,displayContent:async x=>{l.value=await JSON.stringify(x,null,2),o.value=`${x.name} [${x.type}]`,i.value=!0},closeModal:()=>{o.value="",l.value="",i.value=!1},ModalWindow:N,JsonViewer:z,get formatTolerance(){return ce},WorkflowArrow:Z};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),rt={class:"sshProbes list-reset pills"},dt=["onClick"],ct={class:"sshProbe__tolerance",title:"Tolerance"},ut={key:0,class:"sshProbe__background"},pt={key:0,role:"decoration"};function ft(u,n,r,e,i,l){return s(),a(C,null,[t("ol",rt,[(s(!0),a(C,null,W(e.probes,(o,_)=>(s(),a("li",{key:_,class:"sshProbes__item"},[t("button",{onClick:G(y=>e.displayContent(o),["prevent"]),class:"sshProbe pill",title:"Click to display probe definition"},[w(m(o.name)+" ",1),t("span",ct,m(e.formatTolerance(o.tolerance)),1),o.background?(s(),a("span",ut," Background ")):f("",!0)],8,dt),_<e.probes.length-1?(s(),a("span",pt,[c(e.WorkflowArrow)])):f("",!0)]))),128))]),e.displayModal?(s(),h(e.ModalWindow,{key:0,isLarge:!0,hasCloseButton:!0,onClose:e.closeModal},{title:S(()=>[w(m(e.modalTitle),1)]),content:S(()=>[c(e.JsonViewer,{json:e.modalContent},null,8,["json"])]),_:1})):f("",!0)],64)}const _t=L(lt,[["render",ft],["__scopeId","data-v-e84c3298"]]),mt=M({__name:"ExperimentGenericList",props:{content:{},type:{}},setup(u,{expose:n}){n();const r=u,{content:e}=R(r),i=d(!1),l=d(""),o=d(""),v={props:r,content:e,displayModal:i,modalContent:l,modalTitle:o,displayContent:async x=>{l.value=await JSON.stringify(x,null,2),o.value=`${x.name}`,i.value=!0},closeModal:()=>{o.value="",l.value="",i.value=!1},ModalWindow:N,JsonViewer:z,WorkflowArrow:Z};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),ht={class:"experimentItems list-reset pills"},vt=["onClick"],xt={key:0,role:"decoration"};function yt(u,n,r,e,i,l){return s(),a(C,null,[t("ul",ht,[(s(!0),a(C,null,W(e.content,(o,_)=>(s(),a("li",{key:_},[t("button",{onClick:G(y=>e.displayContent(o),["prevent"]),class:"experimentItem pill",title:"Click to display definition"},m(o.name),9,vt),_<e.content.length-1?(s(),a("span",xt,[c(e.WorkflowArrow)])):f("",!0)]))),128))]),e.displayModal?(s(),h(e.ModalWindow,{key:0,isLarge:!0,hasCloseButton:!0,onClose:e.closeModal},{title:S(()=>[w(m(e.modalTitle),1)]),content:S(()=>[c(e.JsonViewer,{json:e.modalContent},null,8,["json"])]),_:1})):f("",!0)],64)}const bt=L(mt,[["render",yt],["__scopeId","data-v-fcb79b0c"]]),gt=M({__name:"ExperimentMethod",props:{method:{}},setup(u,{expose:n}){n();const r=u,{method:e}=R(r),i=d(!1),l=d(""),o=d(""),v={props:r,method:e,displayModal:i,modalContent:l,modalTitle:o,displayContent:async x=>{l.value=await JSON.stringify(x,null,2),o.value=`${x.name} [${x.type}]`,i.value=!0},closeModal:()=>{o.value="",l.value="",i.value=!1},ModalWindow:N,JsonViewer:z,WorkflowArrow:Z};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),kt={class:"experimentMethodList list-reset pills"},wt=["onClick"],Et={key:0,class:"experimentMethodItem__type experimentMethodItem__type--background"},St={key:0,role:"decoration"};function Ct(u,n,r,e,i,l){return s(),a(C,null,[t("ul",kt,[(s(!0),a(C,null,W(e.method,(o,_)=>(s(),a("li",{key:_},[t("button",{class:"experimentMethodItem pill",title:"Click to display definition",onClick:G(y=>e.displayContent(o),["prevent"])},[w(m(o.name)+" ",1),t("span",{class:Te(["experimentMethodItem__type",`experimentMethodItem__type--${o.type}`])},m(o.type),3),o.background?(s(),a("span",Et," Background ")):f("",!0)],8,wt),_<e.method.length-1?(s(),a("span",St,[c(e.WorkflowArrow)])):f("",!0)]))),128))]),e.displayModal?(s(),h(e.ModalWindow,{key:0,isLarge:!0,hasCloseButton:!0,onClose:e.closeModal},{title:S(()=>[w(m(e.modalTitle),1)]),content:S(()=>[c(e.JsonViewer,{json:e.modalContent},null,8,["json"])]),_:1})):f("",!0)],64)}const Lt=L(gt,[["render",Ct],["__scopeId","data-v-168f5837"]]),Pt=M({__name:"ExperimentExecutionPreview",props:{execution:{},page:{}},setup(u,{expose:n}){n();const r=u,{execution:e,page:i}=R(r),l=k(()=>_e(e.value)),o=d(!1),v={props:r,execution:e,page:i,statusObject:l,isDeleteDisplayed:o,displayDelete:()=>{o.value=!0},closeDelete:()=>{o.value=!1},TimeAgo:ne,ExecutionMiniStatus:je,ModalWindow:N,ConfirmDeleteExecution:Oe,DeleteButton:Ve};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Dt={class:"executionPreview tableList__row"},Tt={class:"tableList__cell tableList__cell--center tableList__cell--status"},Mt={class:"executionPreview__meta tableList__cell"},It={class:"executionPreview__info"},At=["href"],Bt={class:"tableList__cell"},Rt={class:"tableList__cell tableList__cell--small"};function jt(u,n,r,e,i,l){return s(),a("li",Dt,[t("div",Tt,[c(e.ExecutionMiniStatus,{status:e.statusObject},null,8,["status"])]),t("div",Mt,[t("div",It,[t("a",{href:`/executions/view/?id=${e.execution.id}&exp=${e.execution.experiment_id}`},m(e.execution.id),9,At)])]),t("div",Bt,[c(e.TimeAgo,{timestamp:e.execution.created_date.toString()},null,8,["timestamp"])]),t("div",Rt,[c(e.DeleteButton,{onClick:G(e.displayDelete,["prevent"])})]),e.isDeleteDisplayed?(s(),h(e.ModalWindow,{key:0,hasCloseButton:!0,hasPadding:!0,onClose:e.closeDelete},{title:S(()=>n[0]||(n[0]=[w("Delete Experiment")])),content:S(()=>[c(e.ConfirmDeleteExecution,{id:e.execution.id,exp:e.execution.experiment_id,onExp:!0,page:e.page,onClose:e.closeDelete},null,8,["id","exp","page"])]),_:1})):f("",!0)])}const Ot=L(Pt,[["render",jt],["__scopeId","data-v-1b43701e"]]),Vt=M({__name:"ExperimentExecutions",props:{experimentId:{}},setup(u,{expose:n}){n();const r=u,{experimentId:e}=R(r),i=d(void 0),l=d({currentPage:1,lastPage:1,urlBase:""}),o=d(void 0),_=d([]),y=d(!0),v=k(()=>o.value!==void 0&&o.value>10),x=()=>{let E=window.location,A=new URLSearchParams(E.search);A.has("executions")?i.value=parseInt(A.get("executions")):i.value=1},g=async()=>{await me(i.value,e.value);let E=he.get();_.value=E.executions,o.value=E.total},P=()=>{let E={currentPage:i.value,lastPage:Math.ceil(o.value/10),urlBase:`/experiments/view/?id=${e.value}&executions=`};l.value=E},O=k(()=>(i.value-1)*10+1),I=k(()=>i.value===Math.ceil(o.value/10)?o.value:(i.value-1)*10+9);F(async()=>{y.value=!0,x(),await g(),P(),y.value=!1});const D={props:r,experimentId:e,page:i,pagerData:l,total:o,execs:_,isLoading:y,isPagerDisplayed:v,getCurrentPage:x,getExecutions:g,getpagerData:P,firstDisplayedExecution:O,lastDisplayedExecution:I,ExperimentExecutionPreview:Ot,Pager:qe,LoadingPlaceholder:X};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),qt={key:1,class:"experimentExecutionsList"},Wt={class:"executionsList tableList"};function Ht(u,n,r,e,i,l){return e.isLoading?(s(),h(e.LoadingPlaceholder,{key:0})):e.total!==void 0&&e.total>0?(s(),a("div",qt,[t("h2",null,[n[0]||(n[0]=w(" Executions ")),t("small",null,m(e.firstDisplayedExecution)+" to "+m(e.lastDisplayedExecution)+" of "+m(e.total),1)]),t("ul",Wt,[n[1]||(n[1]=ie('<li class="tableList__row tableList__row--header" data-v-2d62275e><div class="tableList__cell tableList__cell--center tableList__cell--status" data-v-2d62275e> Status </div><div class="tableList__cell" data-v-2d62275e>Execution ID</div><div class="tableList__cell" data-v-2d62275e>Run</div><div class="tableList__cell" data-v-2d62275e><span class="screen-reader-text" data-v-2d62275e>Actions</span></div></li>',1)),(s(!0),a(C,null,W(e.execs,o=>(s(),h(e.ExperimentExecutionPreview,{execution:o,page:e.page||1,key:o.id,class:"tableList__row"},null,8,["execution","page"]))),128))]),e.isPagerDisplayed?(s(),h(e.Pager,{key:0,page:e.pagerData},null,8,["page"])):f("",!0)])):f("",!0)}const Nt=L(Vt,[["render",Ht],["__scopeId","data-v-2d62275e"]]),Ft=M({__name:"ExperimentPlans",props:{experimentId:{}},setup(u,{expose:n}){n();const r=u,{experimentId:e}=R(r),i=d(!0),l=d(""),o=K(We);function _(){let x=window.location,g=new URLSearchParams(x.search);g.has("search")?l.value=g.get("search"):l.value=""}async function y(){i.value=!0,_(),await He(e.value,"experiments",l.value),i.value=!1}F(async()=>{await y()});const v={props:r,experimentId:e,isLoading:i,searchTerm:l,plans:o,getSearchTerm:_,refreshList:y,PlanPreview:Ne,EntityFilter:Fe,LoadingPlaceholder:X};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),Jt={class:"experimentPlansList"},Ut={key:1,class:"plansList tableList"},zt={key:2};function Gt(u,n,r,e,i,l){return s(),a("div",Jt,[n[1]||(n[1]=t("div",{class:"experimentPlansList__heading"},[t("h2",null,"Plans"),t("p",null,"This experiment is run by the following plans.")],-1)),c(e.EntityFilter,{onSearch:e.refreshList}),e.isLoading?(s(),h(e.LoadingPlaceholder,{key:0})):e.plans.length>0?(s(),a("ul",Ut,[n[0]||(n[0]=ie('<li class="tableList__row tableList__row--header" data-v-03ac2f95><div class="tableList__cell tableList__cell--center tableList__cell--status" data-v-03ac2f95></div><div class="tableList__cell" data-v-03ac2f95>Plan</div><div class="tableList__cell" data-v-03ac2f95>Experiments</div><div class="tableList__cell" data-v-03ac2f95>Environment</div><div class="tableList__cell tableList__cell--right" data-v-03ac2f95> Total Runs </div><div class="tableList__cell tableList__cell--right" data-v-03ac2f95>Last</div><div class="tableList__cell tableList__cell--right" data-v-03ac2f95>Next</div><div class="tableList__cell" data-v-03ac2f95>Schedule</div><div class="tableList__cell" data-v-03ac2f95><span class="screen-reader-text" data-v-03ac2f95>Actions</span></div></li>',1)),(s(!0),a(C,null,W(e.plans,o=>(s(),a(C,{key:o.id},[o.status!=="deleting"?(s(),h(e.PlanPreview,{key:0,plan:o,store:{name:"experiments",id:e.experimentId},page:0,class:"tableList__row"},null,8,["plan","store"])):f("",!0)],64))),128))])):(s(),a("p",zt,"You have filtered out all your plans"))])}const Yt=L(Ft,[["render",Gt],["__scopeId","data-v-03ac2f95"]]),Qt=null,Kt=M({__name:"ExperimentView",setup(u,{expose:n}){n();const r=d(!0),e=d(void 0),i=d(void 0),l=()=>{let p=window.location,b=new URLSearchParams(p.search);b.has("id")&&(e.value=b.get("id"))},o=async()=>{await pe(e.value),i.value=fe.get()},_=()=>{let p="Experiment · Reliably",b="View your Reliably experiment details";i.value!==void 0&&i.value!==null&&(p=`${i.value.definition.title} · Reliably`,i.value.definition.description!==void 0&&(b=i.value.definition.description)),document.title=p;const U=document.querySelector("meta[name='description']");U instanceof HTMLMetaElement&&(U.content=b)},y=k(()=>{const p=i.value;if(p!==void 0){const b=p.definition.runtime?.hypothesis?.strategy;if(b!==void 0)return b==="default"||b==="before-method-only"}return!1}),v=k(()=>{const p=i.value;if(p!==void 0){const b=p.definition.runtime?.hypothesis?.strategy;if(b!==void 0)return b==="default"||b==="after-method-only"}return!1}),x=k(()=>{if(i){const p=i.value?.definition.extensions;if(p){const b=p.findIndex(U=>U.name==="reliablyui");if(b>-1)return p[b].workflow!==void 0}}return!1}),g=d([{label:"Edit",link:"#",icon:"edit",disabled:!0,reason:"Only experiments created with the Builder can be edited"},{label:"Delete",action:"delete",icon:"trash",warning:!0}]);function P(){e.value&&(g.value[0].link=`/experiments/workflows/build/?edit=${e.value}`),x.value&&(g.value[0].disabled=!1)}async function O(p){p==="delete"&&ee()}const I=d("unknown"),D=d(""),E=async()=>{let p=K(ve);p.value.experimentId!==e.value&&await xe(e.value),p.value.lastStatuses[0]!==void 0&&(I.value=p.value.lastStatuses[0]),p.value.lastExecution===null?D.value="":p.value.lastExecution instanceof Date?D.value=p.value.lastExecution.toString():D.value=p.value.lastExecution},A=K(ye),H=d("");async function V(){await be(e.value),A.value&&(H.value=A.value.query.question)}const T=k(()=>i.value===void 0||i.value.definition.tags===void 0?!1:i.value.definition.tags.length>0),B=k(()=>i.value===void 0||i.value.definition.controls===void 0?!1:i.value.definition.controls.length>0),j=k(()=>i.value===void 0||i.value.definition.method===void 0?!1:i.value.definition.method.length>0),q=k(()=>!(i.value===void 0||i.value.definition["steady-state-hypothesis"]===void 0)),se=k(()=>i.value===void 0||i.value.definition["steady-state-hypothesis"]===void 0||i.value.definition["steady-state-hypothesis"].probes===void 0?!1:i.value.definition["steady-state-hypothesis"].probes.length>0),oe=k(()=>i.value===void 0||i.value.definition.rollbacks===void 0?!1:i.value.definition.rollbacks.length>0),ae=k(()=>i.value?.definition.configuration?i.value.definition.configuration:null),Y=d(!1),le=()=>{Y.value=!0},re=()=>{Y.value=!1},J=d(null);function $(){if(J.value){let p=window.location;new URLSearchParams(p.search).has("executions")&&J.value.scrollIntoView({behavior:"smooth",block:"center"})}}Me(J,()=>{$()});const Q=d(!1),ee=()=>{Q.value=!0},de=()=>{Q.value=!1};F(async()=>{r.value=!0,l(),await o(),_(),await E(),P(),await V(),r.value=!1});const te={isLoading:r,id:e,exp:i,getCurrentId:l,getExperiment:o,setMetaData:_,sshStrategyHasPrecheck:y,sshStrategyHasVerification:v,isEditable:x,manageActions:g,updateManageActions:P,handleMultiButtonAction:O,lastStatus:I,lastExecution:D,getStatus:E,s:A,question:H,getScenario:V,hasTags:T,hasControls:B,hasMethod:j,hasSSh:q,hasSshProbes:se,hasRollbacks:oe,experimentEnv:Qt,experimentConf:ae,isDefinitionDisplayed:Y,displayExperimentDefinition:le,closeExperimentDefinition:re,experimentExecutions:J,scrollToExecutions:$,isDeleteDisplayed:Q,displayDelete:ee,closeDelete:de,get shortenUuid(){return ue},LoadingPlaceholder:X,NoData:ge,ModalWindow:N,MultiButton:ke,TagList:we,TimeAgo:ne,JsonViewer:z,ConfirmDeleteExperiment:Ee,ExperimentScore:Se,ExperimentFreshness:Ce,ExperimentTrend:Le,ExperimentStrategy:Xe,ExecutionEnvironment:Ie,ContributionsRadar:it,SshProbesList:_t,ExperimentGenericList:bt,ExperimentMethod:Lt,ExperimentExecutions:Nt,ExperimentPlans:Yt};return Object.defineProperty(te,"__isScriptSetup",{enumerable:!1,value:!0}),te}}),Xt={key:1,class:"experimentView"},Zt={class:"pageHeader"},$t={class:"pageHeader__title"},en={key:0,class:"pageHeader__description"},tn={class:"pageHeader__actions"},nn=["href"],sn={key:0,class:"experimentAssistantInfo"},on={class:"experimentAssistantInfo__question"},an={class:"experimentAssistantInfo__details"},ln={key:0,class:"experimentAssistantInfo__tags"},rn={class:"experimentAssistantInfo__details pills"},dn={class:"experimentInfo"},cn={class:"experimentInfo__score"},un={class:"experimentInfo__trend"},pn={class:"experimentInfo__freshness"},fn={class:"experimentInfo__created"},_n={key:0},mn={class:"experimentInfo__lastRun"},hn={class:"experimentMeta"},vn={class:"experimentMeta__section"},xn={class:"experimentTags"},yn={key:1},bn={class:"experimentMeta__section"},gn={key:0,class:"experimentSsh"},kn={key:0},wn={class:"screen-reader-text"},En={key:0},Sn={class:"experimentMethod"},Cn={key:1},Ln={class:"experimentSsh"},Pn={key:0},Dn={class:"screen-reader-text"},Tn={key:0},Mn={key:1},In={class:"experimentRollbacks"},An={key:1},Bn={class:"experimentControls"},Rn={key:1},jn={class:"experimentStrategyWrapper"},On={key:1,class:"executionSection executionSection--env"},Vn={class:"experimentPlans"},qn={ref:"experimentExecutions",class:"experimentExecutions"};function Wn(u,n,r,e,i,l){return e.isLoading?(s(),h(e.LoadingPlaceholder,{key:0,size:"large"})):e.exp!==void 0&&e.exp!==null&&e.exp.id!==void 0?(s(),a("article",Xt,[t("header",Zt,[t("div",null,[t("h1",$t,[t("span",null,[w(m(e.exp.definition.title)+" ",1),t("small",null,m(e.shortenUuid(e.exp.definition.uuid)),1)])]),e.exp.definition.description?(s(),a("p",en,m(e.exp.definition.description),1)):f("",!0)]),t("div",tn,[c(e.MultiButton,{title:"Manage experiment",options:e.manageActions,onEmitAction:e.handleMultiButtonAction},null,8,["options"]),t("a",{href:`/plans/new/?exp=${e.exp.id}`,class:"button button--creative"}," Run experiment ",8,nn)])]),e.question!==""?(s(),a("section",sn,[n[2]||(n[2]=t("div",{class:"AiIcon AiIcon--medium hasTooltip hasTooltip--center-top","aria-label":"This experiment was generated by Reliably Assistant",label:"This experiment was generated by Reliably Assistant"},null,-1)),t("div",on,[n[0]||(n[0]=t("p",{class:"experimentAssistantInfo__heading"},"Question",-1)),t("p",an,m(e.question),1)]),e.s.query.tags.length?(s(),a("div",ln,[n[1]||(n[1]=t("p",{class:"experimentAssistantInfo__heading"},"Tags",-1)),t("p",rn,[(s(!0),a(C,null,W(e.s.query.tags,o=>(s(),a("span",{key:o,class:"pill"},m(o),1))),128))])])):f("",!0)])):f("",!0),t("section",dn,[t("dl",null,[t("div",cn,[n[3]||(n[3]=t("dt",null,"Score",-1)),t("dd",null,[e.exp.score!==void 0&&e.exp.score!==null?(s(),h(e.ExperimentScore,{key:0,score:e.exp.score.score},null,8,["score"])):(s(),h(e.ExperimentScore,{key:1,score:null}))])]),t("div",un,[n[4]||(n[4]=t("dt",null,"Trend",-1)),t("dd",null,[e.exp.score!==void 0&&e.exp.score!==null?(s(),h(e.ExperimentTrend,{key:0,trend:e.exp.score.trend,exp:e.exp.id},null,8,["trend","exp"])):f("",!0)])]),t("div",pn,[n[5]||(n[5]=t("dt",null,"Freshness",-1)),t("dd",null,[c(e.ExperimentFreshness,{last:e.lastExecution},null,8,["last"])])]),t("div",fn,[n[6]||(n[6]=t("dt",null,"Created",-1)),t("dd",null,[c(e.TimeAgo,{timestamp:e.exp.created_date.toString()},null,8,["timestamp"]),e.exp.created_by?(s(),a("span",_n,"by "+m(e.exp.created_by),1)):f("",!0)])]),t("div",mn,[n[7]||(n[7]=t("dt",null,"Last run",-1)),t("dd",null,[c(e.TimeAgo,{timestamp:e.lastExecution},null,8,["timestamp"])])])])]),t("section",hn,[t("button",{onClick:e.displayExperimentDefinition,class:"button button--icon experimentMeta__src hasTooltip hasTooltip--center-left","aria-label":"View Experiment",label:"View Experiment"}," { } "),t("div",vn,[c(e.ContributionsRadar,{contributions:e.exp.definition.contributions},null,8,["contributions"]),t("div",xn,[n[8]||(n[8]=t("h2",null,"Tags",-1)),e.hasTags?(s(),h(e.TagList,{key:0,tags:e.exp.definition.tags},null,8,["tags"])):(s(),a("p",yn,"This experiment doesn't declare tags."))])]),t("div",bn,[e.sshStrategyHasPrecheck?(s(),a("div",gn,[n[9]||(n[9]=t("h2",null,"Pre-condition",-1)),e.hasSSh?(s(),a("dl",kn,[t("p",wn," Title: "+m(e.exp.definition["steady-state-hypothesis"].title),1),e.hasSshProbes?(s(),a("div",En,[c(e.SshProbesList,{probes:e.exp.definition["steady-state-hypothesis"].probes},null,8,["probes"])])):f("",!0)])):f("",!0)])):f("",!0),t("div",Sn,[n[10]||(n[10]=t("h2",null,"Turbulence",-1)),e.hasMethod?(s(),h(e.ExperimentMethod,{key:0,method:e.exp.definition.method},null,8,["method"])):(s(),a("p",Cn," This experiment's method doesn't declare any actions or probes "))]),t("div",Ln,[n[11]||(n[11]=t("h2",null,"Verification",-1)),e.hasSSh&&e.sshStrategyHasVerification?(s(),a("dl",Pn,[t("p",Dn," Title: "+m(e.exp.definition["steady-state-hypothesis"].title),1),e.hasSshProbes?(s(),a("div",Tn,[c(e.SshProbesList,{probes:e.exp.definition["steady-state-hypothesis"].probes},null,8,["probes"])])):f("",!0)])):(s(),a("p",Mn," This experiment doesn't declare a verification step "))]),t("div",In,[n[12]||(n[12]=t("h2",null,"Rollbacks",-1)),e.hasRollbacks?(s(),h(e.ExperimentMethod,{key:0,method:e.exp.definition.rollbacks},null,8,["method"])):(s(),a("p",An,"This experiment doesn't declare rollbacks"))]),t("div",Bn,[n[13]||(n[13]=t("h2",null,"Controls",-1)),e.hasControls?(s(),h(e.ExperimentGenericList,{key:0,content:e.exp.definition.controls},null,8,["content"])):(s(),a("p",Rn,"This experiment doesn't declare controls"))])])]),t("section",jn,[n[14]||(n[14]=t("h2",null,"Runtime configuration",-1)),c(e.ExperimentStrategy,{strategy:e.exp.definition.runtime},null,8,["strategy"])]),e.experimentEnv||e.experimentConf?(s(),a("section",On,[n[15]||(n[15]=t("h2",null,"Configuration",-1)),c(e.ExecutionEnvironment,{conf:e.experimentConf,"is-editable":!0,experiment:e.id},null,8,["conf","experiment"])])):f("",!0),t("section",Vn,[c(e.ExperimentPlans,{experimentId:e.exp.id},null,8,["experimentId"])]),t("section",qn,[c(e.ExperimentExecutions,{experimentId:e.exp.id},null,8,["experimentId"])],512),e.isDeleteDisplayed?(s(),h(e.ModalWindow,{key:2,hasCloseButton:!0,hasPadding:!0,onClose:e.closeDelete},{title:S(()=>n[16]||(n[16]=[w("Delete Experiment")])),content:S(()=>[c(e.ConfirmDeleteExperiment,{id:e.exp.id,onClose:e.closeDelete},null,8,["id"])]),_:1})):f("",!0),e.isDefinitionDisplayed?(s(),h(e.ModalWindow,{key:3,isUnlimited:!0,hasCloseButton:!0,onClose:e.closeExperimentDefinition},{title:S(()=>n[17]||(n[17]=[w("Experiment Definition")])),content:S(()=>[c(e.JsonViewer,{json:JSON.stringify(e.exp.definition,null,2)},null,8,["json"])]),_:1})):f("",!0)])):(s(),h(e.NoData,{key:2,message:"We couldn't find an experiment with this ID."}))}const ns=L(Kt,[["render",Wn],["__scopeId","data-v-7b002f27"]]);export{ns as default};
