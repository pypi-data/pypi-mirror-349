import{v as u,w as x}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as B}from"./integrations.Be-n79W6.js";import{_ as V}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as C,c as p,a as n,b as s,w as d,e as b,n as h,r as i,g as W,h as m}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import"./user.DMXaCJik.js";import"./user.TOXT8CXA.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./index.CwJxcYEt.js";const q=C({__name:"ReliablyPrechecksForm",setup(E,{expose:r}){r();const a=i(""),e=i(!0);function c(){a.value===""?e.value=!1:e.value=!0}const o=i(""),t=i(!0);function y(){o.value===""?t.value=!1:t.value=!0}const v=i(""),l=i(!1),f=W(()=>l.value||!e.value||a.value===""||!t.value||o.value==="");async function N(){if(!f.value){l.value=!0;const k={name:a.value,provider:"prechecks",vendor:"reliably",environment:{name:a.value,used_for:"integration",envvars:[{var_name:"RELIABLY_PRECHECKS_ENDPOINT",value:o.value}],secrets:[{key:"prechecks-auth",var_name:"RELIABLY_PRECHECKS_ENDPOINT_AUTH",value:v.value}]}};await B(k),l.value=!1}}const _={name:a,isNameValid:e,onNameBlur:c,endpoint:o,isEndpointValid:t,onEndpointBlur:y,auth:v,isCreating:l,isSubmitDisabled:f,create:N};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),P={class:"integrationForm form"},R={key:0,class:"inputWrapper__help inputWrapper__help--error"},g={key:0,class:"inputWrapper__help inputWrapper__help--error"},S={class:"inputWrapper"},T={class:"inputWrapper"},w=["disabled"];function D(E,r,a,e,c,o){return m(),p("form",P,[n("div",{class:h(["inputWrapper",{"inputWrapper--error":!e.isNameValid}])},[r[3]||(r[3]=n("label",{for:"name"},[s("Name "),n("span",{class:"required"},"Required")],-1)),d(n("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":r[0]||(r[0]=t=>e.name=t),onBlur:e.onNameBlur,placeholder:"Prechecks for an Execution",required:""},null,544),[[u,e.name]]),e.isNameValid?b("",!0):(m(),p("p",R," A name for your integration is required. "))],2),n("div",{class:h(["inputWrapper",{"inputWrapper--error":!e.isEndpointValid}])},[r[5]||(r[5]=n("label",{for:"endpoint"},[s(" Endpoint to call before the execution starts "),n("span",{class:"required"},"Required")],-1)),d(n("input",{type:"text",name:"endpoint",id:"endpoint","onUpdate:modelValue":r[1]||(r[1]=t=>e.endpoint=t),onBlur:e.onEndpointBlur,required:""},null,544),[[u,e.endpoint]]),e.isEndpointValid?b("",!0):(m(),p("p",g,r[4]||(r[4]=[s(" The endpoint is required."),n("br",null,null,-1)])))],2),n("div",S,[r[6]||(r[6]=n("label",{for:"auth"},[s(" Endpoint authentication "),n("span",{class:"required"},"Prefixed by its scheme")],-1)),d(n("input",{type:"text",name:"auth",id:"auth","onUpdate:modelValue":r[2]||(r[2]=t=>e.auth=t),placeholder:"Bearer token"},null,512),[[u,e.auth]])]),n("div",T,[n("button",{onClick:x(e.create,["prevent"]),disabled:e.isSubmitDisabled,class:"button button--primary"}," Create ",8,w)])])}const j=V(q,[["render",D]]);export{j as default};
