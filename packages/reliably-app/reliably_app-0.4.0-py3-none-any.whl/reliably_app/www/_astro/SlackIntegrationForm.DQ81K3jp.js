import{v,w as g}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as N}from"./integrations.CUprebZ9.js";import{_ as q}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as x,c,a as n,b as s,w as f,e as _,n as k,j as T,r as l,g as A,h as m}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./index.CwJxcYEt.js";const w=x({__name:"SlackIntegrationForm",setup(V,{expose:a}){a();const o=l(""),e=l(!0);function h(){o.value===""?e.value=!1:e.value=!0}const t=l(""),r=l(!0),i=l("");function S(){t.value===""?(r.value=!1,i.value="You must provide a Slack channel."):t.value.startsWith("#")?t.value.includes(" ")?(r.value=!1,i.value="A Slack channel can't contain spaces."):(r.value=!0,i.value=""):(r.value=!1,i.value="A Slack channel must start with a #.")}const u=l(""),p=l(!0);function W(){u.value===""?p.value=!1:p.value=!0}const d=l(!1),C=A(()=>d.value||!e.value||o.value===""||!r.value||t.value===""||!p.value||u.value==="");async function y(){if(!C.value){d.value=!0;const B={name:o.value,provider:"slack",vendor:"slack",environment:{name:"slack",used_for:"integration",envvars:[{var_name:"SLACK_CHANNEL",value:t.value}],secrets:[{key:"slack-token",var_name:"SLACK_BOT_TOKEN",value:u.value}]}};await N(B),d.value=!1}}const b={name:o,isNameValid:e,onNameBlur:h,channel:t,isChannelValid:r,invalidChannelMessage:i,onChannelBlur:S,token:u,isTokenValid:p,onTokenBlur:W,isCreating:d,isSubmitDisabled:C,create:y};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),D={class:"integrationForm form"},M={key:0,class:"inputWrapper__help inputWrapper__help--error"},E={key:0,class:"inputWrapper__help inputWrapper__help--error"},F={key:0,class:"inputWrapper__help inputWrapper__help--error"},I={class:"inputWrapper"},K=["disabled"];function L(V,a,o,e,h,t){return m(),c("form",D,[n("div",{class:k(["inputWrapper",{"inputWrapper--error":!e.isNameValid}])},[a[3]||(a[3]=n("label",{for:"name"},[s("Name "),n("span",{class:"required"},"Required")],-1)),f(n("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":a[0]||(a[0]=r=>e.name=r),onBlur:e.onNameBlur,required:""},null,544),[[v,e.name]]),e.isNameValid?_("",!0):(m(),c("p",M," A name for your integration is required. "))],2),n("div",{class:k(["inputWrapper",{"inputWrapper--error":!e.isChannelValid}])},[a[4]||(a[4]=n("label",{for:"channel"},[s("Channel "),n("span",{class:"required"},"Required")],-1)),f(n("input",{type:"text",name:"channel",id:"channel","onUpdate:modelValue":a[1]||(a[1]=r=>e.channel=r),onBlur:e.onChannelBlur,placeholder:"#channel",required:""},null,544),[[v,e.channel]]),e.isChannelValid?_("",!0):(m(),c("p",E,T(e.invalidChannelMessage),1))],2),n("div",{class:k(["inputWrapper",{"inputWrapper--error":!e.isTokenValid}])},[a[6]||(a[6]=n("label",{for:"token"},[s("Slack token "),n("span",{class:"required"},"Required")],-1)),f(n("input",{type:"text",name:"token",id:"token","onUpdate:modelValue":a[2]||(a[2]=r=>e.token=r),onBlur:e.onTokenBlur,autocomplete:"off",required:""},null,544),[[v,e.token]]),e.isTokenValid?_("",!0):(m(),c("p",F,a[5]||(a[5]=[s(" A "),n("a",{href:"https://api.slack.com/authentication/token-types",target:"_blank",rel:"noopener noreferer"},"Slack access token",-1),s(" is required. ")])))],2),n("div",I,[n("button",{onClick:g(e.create,["prevent"]),disabled:e.isSubmitDisabled,class:"button button--primary"}," Create ",8,K)])])}const Q=q(w,[["render",L]]);export{Q as default};
