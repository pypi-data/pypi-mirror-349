import{v as f,w as x}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{c as F}from"./integrations.CUprebZ9.js";import{_ as R}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as U,c as v,a as n,b as l,w as c,e as b,n as _,r as t,g as k,h as y}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./index.CwJxcYEt.js";const D=U({__name:"ReliablySafeguardsForm",setup(A,{expose:r}){r();const i=t(""),e=t(!0);function E(){i.value===""?e.value=!1:e.value=!0}const o=t(""),a=t(!0);function S(){o.value===""?a.value=!1:a.value=!0}const u=t(1),s=t(!0);function W(){u.value<1||u.value>300?s.value=!1:s.value=!0}const d=t(""),p=t(!0);function g(){d.value===""?p.value=!1:p.value=!0}const m=t(!1),B=k(()=>m.value||!e.value||i.value===""||!a.value||o.value===""||!p.value||d.value===""||!s.value);function h(q){return q?"1":"0"}async function N(){if(!B.value){m.value=!0;const q={name:i.value,provider:"safeguards",vendor:"reliably",environment:{name:i.value,used_for:"integration",envvars:[{var_name:"RELIABLY_SAFEGUARDS_ENDPOINT",value:o.value},{var_name:"RELIABLY_SAFEGUARDS_FREQUENCY",value:u.value.toString()}],secrets:[{key:"safeguards-auth",var_name:"RELIABLY_SAFEGUARDS_ENDPOINT_AUTH",value:d.value}]}};await F(q),m.value=!1}}const V={name:i,isNameValid:e,onNameBlur:E,endpoint:o,isEndpointValid:a,onEndpointBlur:S,frequency:u,isFrequencyValid:s,onFrequencyBlur:W,auth:d,isAuthValid:p,onAuthBlur:g,isCreating:m,isSubmitDisabled:B,booleanToString:h,create:N};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),T={class:"integrationForm form"},C={key:0,class:"inputWrapper__help inputWrapper__help--error"},I={key:0,class:"inputWrapper__help inputWrapper__help--error"},L={key:0,class:"inputWrapper__help inputWrapper__help--error"},w={class:"inputWrapper"},P=["disabled"];function Y(A,r,i,e,E,o){return y(),v("form",T,[n("div",{class:_(["inputWrapper",{"inputWrapper--error":!e.isNameValid}])},[r[4]||(r[4]=n("label",{for:"name"},[l("Name "),n("span",{class:"required"},"Required")],-1)),c(n("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":r[0]||(r[0]=a=>e.name=a),onBlur:e.onNameBlur,placeholder:"Safeguards for an Execution",required:""},null,544),[[f,e.name]]),e.isNameValid?b("",!0):(y(),v("p",C," A name for your integration is required. "))],2),n("div",{class:_(["inputWrapper",{"inputWrapper--error":!e.isEndpointValid}])},[r[6]||(r[6]=n("label",{for:"endpoint"},[l(" Endpoint to call during the execution "),n("span",{class:"required"},"Required")],-1)),c(n("input",{type:"text",name:"endpoint",id:"endpoint","onUpdate:modelValue":r[1]||(r[1]=a=>e.endpoint=a),onBlur:e.onEndpointBlur,required:""},null,544),[[f,e.endpoint]]),e.isEndpointValid?b("",!0):(y(),v("p",I,r[5]||(r[5]=[l(" The endpoint is required."),n("br",null,null,-1)])))],2),n("div",{class:_(["inputWrapper",{"inputWrapper--error":!e.isFrequencyValid}])},[r[8]||(r[8]=n("label",{for:"frequency"},[l(" Endpoint call frequency in seconds "),n("span",{class:"required"},"Required")],-1)),c(n("input",{type:"number",name:"frequency",id:"frequency","onUpdate:modelValue":r[2]||(r[2]=a=>e.frequency=a),onBlur:e.onFrequencyBlur,min:"1",max:"300",required:""},null,544),[[f,e.frequency]]),e.isFrequencyValid?b("",!0):(y(),v("p",L,r[7]||(r[7]=[l(" The frequency is required."),n("br",null,null,-1)])))],2),n("div",{class:_(["inputWrapper",{"inputWrapper--error":!e.isAuthValid}])},[r[9]||(r[9]=n("label",{for:"auth"},[l(" Endpoint authentication "),n("span",{class:"required"},"Prefixed by its scheme")],-1)),c(n("input",{type:"text",name:"auth",id:"auth","onUpdate:modelValue":r[3]||(r[3]=a=>e.auth=a),onBlur:e.onAuthBlur,placeholder:"Bearer token"},null,544),[[f,e.auth]])],2),n("div",w,[n("button",{onClick:x(e.create,["prevent"]),disabled:e.isSubmitDisabled,class:"button button--primary"}," Create ",8,P)])])}const Z=R(D,[["render",Y]]);export{Z as default};
