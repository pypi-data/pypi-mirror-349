import{v as H,d as r,w as d}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{o as J}from"./index.DUHDLdXK.js";/* empty css                        */import{_ as Q}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{v as X}from"./notifications.NSMm1_5U.js";import{d as Y,t as Z,r as i,g as M,o as $,h as c,c as u,a as F,b as ee,j as g,e as R,w as le,n as te,F as ae,k as ie,L as j}from"./runtime-core.esm-bundler.Y6RLDZTT.js";const oe=Y({__name:"FilterableSelect",props:{modelValue:{},label:{},options:{},isRequired:{type:Boolean},allowEmpty:{type:Boolean},defaultMessage:{}},emits:["update:modelValue","emit-object"],setup(B,{expose:s,emit:D}){s();const e=B,{label:A,options:y,isRequired:o,allowEmpty:h,defaultMessage:f,modelValue:O}=Z(e),x=D;function E(){x("update:modelValue",_.value)}const N=i(""),T=i(null),U=i(null),w=i(null),n=i(!1),S=i(""),L=i(""),_=i(""),b=i(),l=i(null),V=M(()=>y.value.filter(t=>t.label.toLowerCase().match(S.value.trim().toLowerCase())));function k(){n.value=!0;let t=0;for(const a of b.value)a.getAttribute("value")===_.value?(a.classList.add("filterableSelect__option--current"),a.setAttribute("aria-select","true"),l.value=t):(a.classList.remove("filterableSelect__option--current"),a.setAttribute("aria-select","false")),t++;j(()=>{T.value.focus()})}function C(){n.value=!1,j(()=>{U.value?.focus()}),p()}function q(){n.value=!1,p()}const z=M(()=>n.value?"filterableSelect__list filterableSelect__list--visible":"filterableSelect__list");function K(t,a){L.value=t.label,_.value=t.val,E(),x("emit-object",t),a?q():C(),p()}function p(){S.value=""}function P(){n.value||k(),l.value===null?l.value=0:l.value>0&&l.value--,m(l.value)}function W(){n.value||k(),l.value===null?l.value=0:l.value<V.value.length-1&&l.value++,m(l.value)}function m(t){let a=0;for(const v of b.value)a===t?(v.classList.add("filterableSelect__option--current"),v.setAttribute("aria-select","true")):(v.classList.remove("filterableSelect__option--current"),v.setAttribute("aria-select","false")),a++}function G(){if(l.value!==null){const t=V.value[l.value];K(t)}}J(w,()=>{n.value&&C()}),$(()=>{N.value=X(),b.value=w.value.children,f&&f.value&&f.value!==""&&(L.value=f.value),h?.value&&(K({label:"None",val:""},!0),l.value=0,m(l.value))});const I={props:e,label:A,options:y,isRequired:o,allowEmpty:h,defaultMessage:f,modelValue:O,emit:x,emitUpdate:E,id:N,filter:T,chosen:U,list:w,isListDisplayed:n,optionFilter:S,chosenText:L,chosenVal:_,elements:b,activeElementIndex:l,filteredOptions:V,displayList:k,hideList:C,hideListWithoutFocus:q,listClass:z,setValue:K,resetFilter:p,handleKeyUp:P,handleKeyDown:W,setActiveElement:m,setValueByIndex:G};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),se={class:"filterableSelect"},ne=["for","id"],re={key:0,class:"required"},ce={class:"filterableSelect__wrapper"},ue=["aria-activedescendant","onKeyup"],de=["aria-controls"],fe=["aria-labelledby","id"],ve=["value","onClick"];function _e(B,s,D,e,A,y){return c(),u("div",se,[F("label",{for:`listbox-${e.id}`,id:`label-${e.id}`},[ee(g(e.label)+" ",1),e.isRequired?(c(),u("span",re,"Required")):R("",!0)],8,ne),F("div",ce,[e.isListDisplayed?le((c(),u("input",{key:0,class:"filterableSelect__filter","onUpdate:modelValue":s[0]||(s[0]=o=>e.optionFilter=o),placeholder:"Type to filter",ref:"filter","aria-activedescendant":`listbox-${e.id}`,onKeyup:[r(e.hideList,["esc"]),r(d(e.setValueByIndex,["prevent"]),["tab"]),r(d(e.setValueByIndex,["prevent"]),["enter"])],onKeydown:[r(e.handleKeyUp,["up"]),r(e.handleKeyDown,["down"]),s[1]||(s[1]=r(d(()=>{},["prevent"]),["tab"]))]},null,40,ue)),[[H,e.optionFilter]]):(c(),u("div",{key:1,"aria-controls":`select-${e.id}`,"aria-expanded":"false","aria-haspop":"listbox",class:"filterableSelect__chosen","aria-activedescendant":"",onClick:d(e.displayList,["prevent"]),onKeydown:[r(e.handleKeyUp,["up"]),r(e.handleKeyDown,["down"])],ref:"chosen",tabindex:"0"},g(e.chosenText),41,de)),F("ul",{role:"listbox","aria-labelledby":`label-${e.id}`,id:`listbox-${e.id}`,class:te(["list-reset",e.listClass]),ref:"list",onChange:e.emitUpdate},[e.allowEmpty?(c(),u("li",{key:0,role:"option","aria-selected":"false",class:"filterableSelect__option",value:"",onClick:s[2]||(s[2]=d(o=>e.setValue({label:"None",val:""}),["prevent"]))}," None ")):R("",!0),(c(!0),u(ae,null,ie(e.filteredOptions,o=>(c(),u("li",{role:"option","aria-selected":"false",class:"filterableSelect__option",key:o.val,value:o.val,onClick:d(h=>e.setValue(o),["prevent"])},g(o.label),9,ve))),128))],42,fe)])])}const we=Q(oe,[["render",_e],["__scopeId","data-v-61b1a18b"]]);export{we as F};
