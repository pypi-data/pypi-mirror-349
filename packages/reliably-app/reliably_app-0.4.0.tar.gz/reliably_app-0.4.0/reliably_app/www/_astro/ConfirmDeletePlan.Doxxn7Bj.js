import{h as y}from"./strings.Fm4VVZpd.js";import{v as S,w as T}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{d as E,b as N,f as R}from"./plans.CKfMLPs_.js";/* empty css                      */import{_ as M}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as O,t as v,r as P,h as z,c as U,a as d,w as k,F as A}from"./runtime-core.esm-bundler.Y6RLDZTT.js";function h(t,e,n,r,s,i,o,l){return h.fromTZ(h.tp(t,e,n,r,s,i,o),l)}h.fromTZISO=(t,e,n)=>h.fromTZ(I(t,e),n);h.fromTZ=function(t,e){const n=new Date(Date.UTC(t.y,t.m-1,t.d,t.h,t.i,t.s)),r=C(t.tz,n),s=new Date(n.getTime()-r),i=C(t.tz,s);if(i-r===0)return s;{const o=new Date(n.getTime()-i),l=C(t.tz,o);if(l-i===0)return o;if(!e&&l-i>0)return o;if(e)throw new Error("Invalid date passed to fromTZ()");return s}};h.toTZ=function(t,e){const n=t.toLocaleString("en-US",{timeZone:e}).replace(/[\u202f]/," "),r=new Date(n);return{y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),tz:e}};h.tp=(t,e,n,r,s,i,o)=>({y:t,m:e,d:n,h:r,i:s,s:i,tz:o});function C(t,e=new Date){const n=e.toLocaleString("en-US",{timeZone:t,timeZoneName:"short"}).split(" ").slice(-1)[0],r=e.toLocaleString("en-US").replace(/[\u202f]/," ");return Date.parse(`${r} GMT`)-Date.parse(`${r} ${n}`)}function I(t,e){const n=new Date(Date.parse(t));if(isNaN(n))throw new Error("minitz: Invalid ISO8601 passed to parser.");const r=t.substring(9);return t.includes("Z")||r.includes("-")||r.includes("+")?h.tp(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),"Etc/UTC"):h.tp(n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),e)}h.minitz=h;function W(t){if(t===void 0&&(t={}),delete t.name,t.legacyMode=t.legacyMode===void 0?!0:t.legacyMode,t.paused=t.paused===void 0?!1:t.paused,t.maxRuns=t.maxRuns===void 0?1/0:t.maxRuns,t.catch=t.catch===void 0?!1:t.catch,t.interval=t.interval===void 0?0:parseInt(t.interval,10),t.utcOffset=t.utcOffset===void 0?void 0:parseInt(t.utcOffset,10),t.unref=t.unref===void 0?!1:t.unref,t.startAt&&(t.startAt=new u(t.startAt,t.timezone)),t.stopAt&&(t.stopAt=new u(t.stopAt,t.timezone)),t.interval!==null){if(isNaN(t.interval))throw new Error("CronOptions: Supplied value for interval is not a number");if(t.interval<0)throw new Error("CronOptions: Supplied value for interval can not be negative")}if(t.utcOffset!==void 0){if(isNaN(t.utcOffset))throw new Error("CronOptions: Invalid value passed for utcOffset, should be number representing minutes offset from UTC.");if(t.utcOffset<-870||t.utcOffset>870)throw new Error("CronOptions: utcOffset out of bounds.");if(t.utcOffset!==void 0&&t.timezone)throw new Error("CronOptions: Combining 'utcOffset' with 'timezone' is not allowed.")}if(t.unref!==!0&&t.unref!==!1)throw new Error("CronOptions: Unref should be either true, false or undefined(false).");return t}const b=[31,28,31,30,31,30,31,31,30,31,30,31],m=[["month","year",0],["day","month",-1],["hour","day",0],["minute","hour",0],["second","minute",0]];function u(t,e){if(this.tz=e,t&&t instanceof Date)if(!isNaN(t))this.fromDate(t);else throw new TypeError("CronDate: Invalid date passed to CronDate constructor");else if(t===void 0)this.fromDate(new Date);else if(t&&typeof t=="string")this.fromString(t);else if(t instanceof u)this.fromCronDate(t);else throw new TypeError("CronDate: Invalid type ("+typeof t+") passed to CronDate constructor")}u.prototype.fromDate=function(t){if(this.tz!==void 0)if(typeof this.tz=="number")this.ms=t.getUTCMilliseconds(),this.second=t.getUTCSeconds(),this.minute=t.getUTCMinutes()+this.tz,this.hour=t.getUTCHours(),this.day=t.getUTCDate(),this.month=t.getUTCMonth(),this.year=t.getUTCFullYear(),this.apply();else{const e=h.toTZ(t,this.tz);this.ms=t.getMilliseconds(),this.second=e.s,this.minute=e.i,this.hour=e.h,this.day=e.d,this.month=e.m-1,this.year=e.y}else this.ms=t.getMilliseconds(),this.second=t.getSeconds(),this.minute=t.getMinutes(),this.hour=t.getHours(),this.day=t.getDate(),this.month=t.getMonth(),this.year=t.getFullYear()};u.prototype.fromCronDate=function(t){this.tz=t.tz,this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second,this.ms=t.ms};u.prototype.apply=function(){if(this.month>11||this.day>b[this.month]||this.hour>59||this.minute>59||this.second>59||this.hour<0||this.minute<0||this.second<0){const t=new Date(Date.UTC(this.year,this.month,this.day,this.hour,this.minute,this.second,this.ms));return this.ms=t.getUTCMilliseconds(),this.second=t.getUTCSeconds(),this.minute=t.getUTCMinutes(),this.hour=t.getUTCHours(),this.day=t.getUTCDate(),this.month=t.getUTCMonth(),this.year=t.getUTCFullYear(),!0}else return!1};u.prototype.fromString=function(t){return this.fromDate(h.fromTZISO(t,this.tz))};u.prototype.findNext=function(t,e,n,r){const s=this[e];let i;(n.lastDayOfMonth||n.lastWeekdayOfMonth)&&(this.month!==1?i=b[this.month]:i=new Date(Date.UTC(this.year,this.month+1,0,0,0,0,0)).getUTCDate());const o=!n.starDOW&&e=="day"?new Date(Date.UTC(this.year,this.month,1,0,0,0,0)).getUTCDay():void 0;for(let l=this[e]+r;l<n[e].length;l++){let p=n[e][l];if(e==="day"&&n.lastDayOfMonth&&l-r==i&&(p=!0),e==="day"&&!n.starDOW){let c=n.dayOfWeek[(o+(l-r-1))%7];c&&n.lastWeekdayOfMonth&&(c=c&&l-r>i-7),t.legacyMode&&!n.starDOM?p=p||c:p=p&&c}if(p)return this[e]=l-r,s!==this[e]?2:1}return 3};u.prototype.recurse=function(t,e,n){const r=this.findNext(e,m[n][0],t,m[n][2]);if(r>1){let s=n+1;for(;s<m.length;)this[m[s][0]]=-m[s][2],s++;if(r===3)return this[m[n][1]]++,this[m[n][0]]=-m[n][2],this.apply(),this.recurse(t,e,0);if(this.apply())return this.recurse(t,e,n-1)}return n+=1,n>=m.length?this:this.year>=3e3?null:this.recurse(t,e,n)};u.prototype.increment=function(t,e,n){return this.second+=e.interval>1&&n?e.interval:1,this.ms=0,this.apply(),this.recurse(t,e,0)};u.prototype.getDate=function(t){return t||this.tz===void 0?new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.ms):typeof this.tz=="number"?new Date(Date.UTC(this.year,this.month,this.day,this.hour,this.minute-this.tz,this.second,this.ms)):h(this.year,this.month+1,this.day,this.hour,this.minute,this.second,this.tz)};u.prototype.getTime=function(){return this.getDate().getTime()};function f(t,e){this.pattern=t,this.timezone=e,this.second=Array(60).fill(0),this.minute=Array(60).fill(0),this.hour=Array(24).fill(0),this.day=Array(31).fill(0),this.month=Array(12).fill(0),this.dayOfWeek=Array(8).fill(0),this.lastDayOfMonth=!1,this.lastWeekdayOfMonth=!1,this.starDOM=!1,this.starDOW=!1,this.parse()}f.prototype.parse=function(){if(!(typeof this.pattern=="string"||this.pattern.constructor===String))throw new TypeError("CronPattern: Pattern has to be of type string.");this.pattern.indexOf("@")>=0&&(this.pattern=this.handleNicknames(this.pattern).trim());const t=this.pattern.replace(/\s+/g," ").split(" ");if(t.length<5||t.length>6)throw new TypeError("CronPattern: invalid configuration format ('"+this.pattern+"'), exacly five or six space separated parts required.");if(t.length===5&&t.unshift("0"),t[3].indexOf("L")>=0&&(t[3]=t[3].replace("L",""),this.lastDayOfMonth=!0),t[5].indexOf("L")>=0&&(t[5]=t[5].replace("L",""),this.lastWeekdayOfMonth=!0),t[3]=="*"&&(this.starDOM=!0),t[4].length>=3&&(t[4]=this.replaceAlphaMonths(t[4])),t[5].length>=3&&(t[5]=this.replaceAlphaDays(t[5])),t[5]=="*"&&(this.starDOW=!0),this.pattern.indexOf("?")>=0){const e=new u(new Date,this.timezone).getDate(!0);t[0]=t[0].replace("?",e.getSeconds()),t[1]=t[1].replace("?",e.getMinutes()),t[2]=t[2].replace("?",e.getHours()),this.starDOM||(t[3]=t[3].replace("?",e.getDate())),t[4]=t[4].replace("?",e.getMonth()+1),this.starDOW||(t[5]=t[5].replace("?",e.getDay()))}this.throwAtIllegalCharacters(t),this.partToArray("second",t[0],0),this.partToArray("minute",t[1],0),this.partToArray("hour",t[2],0),this.partToArray("day",t[3],-1),this.partToArray("month",t[4],-1),this.partToArray("dayOfWeek",t[5],0),this.dayOfWeek[7]&&(this.dayOfWeek[0]=1)};f.prototype.partToArray=function(t,e,n){const r=this[t];if(e==="*")return r.fill(1);const s=e.split(",");if(s.length>1)for(let i=0;i<s.length;i++)this.partToArray(t,s[i],n);else e.indexOf("-")!==-1&&e.indexOf("/")!==-1?this.handleRangeWithStepping(e,t,n):e.indexOf("-")!==-1?this.handleRange(e,t,n):e.indexOf("/")!==-1?this.handleStepping(e,t,n):e!==""&&this.handleNumber(e,t,n)};f.prototype.throwAtIllegalCharacters=function(t){const e=/[^/*0-9,-]+/;for(let n=0;n<t.length;n++)if(e.test(t[n]))throw new TypeError("CronPattern: configuration entry "+n+" ("+t[n]+") contains illegal characters.")};f.prototype.handleNumber=function(t,e,n){const r=parseInt(t,10)+n;if(isNaN(r))throw new TypeError("CronPattern: "+e+" is not a number: '"+t+"'");if(r<0||r>=this[e].length)throw new TypeError("CronPattern: "+e+" value out of range: '"+t+"'");this[e][r]=1};f.prototype.handleRangeWithStepping=function(t,e,n){const r=t.match(/^(\d+)-(\d+)\/(\d+)$/);if(r===null)throw new TypeError("CronPattern: Syntax error, illegal range with stepping: '"+t+"'");let[,s,i,o]=r;if(s=parseInt(s,10)+n,i=parseInt(i,10)+n,o=parseInt(o,10),isNaN(s))throw new TypeError("CronPattern: Syntax error, illegal lower range (NaN)");if(isNaN(i))throw new TypeError("CronPattern: Syntax error, illegal upper range (NaN)");if(isNaN(o))throw new TypeError("CronPattern: Syntax error, illegal stepping: (NaN)");if(o===0)throw new TypeError("CronPattern: Syntax error, illegal stepping: 0");if(o>this[e].length)throw new TypeError("CronPattern: Syntax error, steps cannot be greater than maximum value of part ("+this[e].length+")");if(s<0||i>=this[e].length)throw new TypeError("CronPattern: Value out of range: '"+t+"'");if(s>i)throw new TypeError("CronPattern: From value is larger than to value: '"+t+"'");for(let l=s;l<=i;l+=o)this[e][l]=1};f.prototype.handleRange=function(t,e,n){const r=t.split("-");if(r.length!==2)throw new TypeError("CronPattern: Syntax error, illegal range: '"+t+"'");const s=parseInt(r[0],10)+n,i=parseInt(r[1],10)+n;if(isNaN(s))throw new TypeError("CronPattern: Syntax error, illegal lower range (NaN)");if(isNaN(i))throw new TypeError("CronPattern: Syntax error, illegal upper range (NaN)");if(s<0||i>=this[e].length)throw new TypeError("CronPattern: Value out of range: '"+t+"'");if(s>i)throw new TypeError("CronPattern: From value is larger than to value: '"+t+"'");for(let o=s;o<=i;o++)this[e][o]=1};f.prototype.handleStepping=function(t,e){const n=t.split("/");if(n.length!==2)throw new TypeError("CronPattern: Syntax error, illegal stepping: '"+t+"'");let r=0;n[0]!=="*"&&(r=parseInt(n[0],10));const s=parseInt(n[1],10);if(isNaN(s))throw new TypeError("CronPattern: Syntax error, illegal stepping: (NaN)");if(s===0)throw new TypeError("CronPattern: Syntax error, illegal stepping: 0");if(s>this[e].length)throw new TypeError("CronPattern: Syntax error, max steps for part is ("+this[e].length+")");for(let i=r;i<this[e].length;i+=s)this[e][i]=1};f.prototype.replaceAlphaDays=function(t){return t.replace(/-sun/gi,"-7").replace(/sun/gi,"0").replace(/mon/gi,"1").replace(/tue/gi,"2").replace(/wed/gi,"3").replace(/thu/gi,"4").replace(/fri/gi,"5").replace(/sat/gi,"6")};f.prototype.replaceAlphaMonths=function(t){return t.replace(/jan/gi,"1").replace(/feb/gi,"2").replace(/mar/gi,"3").replace(/apr/gi,"4").replace(/may/gi,"5").replace(/jun/gi,"6").replace(/jul/gi,"7").replace(/aug/gi,"8").replace(/sep/gi,"9").replace(/oct/gi,"10").replace(/nov/gi,"11").replace(/dec/gi,"12")};f.prototype.handleNicknames=function(t){const e=t.trim().toLowerCase();return e==="@yearly"||e==="@annually"?"0 0 1 1 *":e==="@monthly"?"0 0 1 * *":e==="@weekly"?"0 0 * * 0":e==="@daily"?"0 0 * * *":e==="@hourly"?"0 * * * *":t};function w(t){return Object.prototype.toString.call(t)==="[object Function]"||typeof t=="function"||t instanceof Function}function L(t){typeof Deno<"u"&&typeof Deno.unrefTimer<"u"?Deno.unrefTimer(t):t&&typeof t.unref<"u"&&t.unref()}const x=30*1e3,g=[];function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);let r,s;if(w(e))s=e;else if(typeof e=="object")r=e;else if(e!==void 0)throw new Error("Cron: Invalid argument passed for optionsIn. Should be one of function, or object (options).");if(w(n))s=n;else if(typeof n=="object")r=n;else if(n!==void 0)throw new Error("Cron: Invalid argument passed for funcIn. Should be one of function, or object (options).");if(this.name=r?r.name:void 0,this.options=W(r),this._states={kill:!1,blocking:!1,previousRun:void 0,currentRun:void 0,once:void 0,currentTimeout:void 0,maxRuns:r?r.maxRuns:void 0,paused:r?r.paused:!1,pattern:void 0},t&&(t instanceof Date||typeof t=="string"&&t.indexOf(":")>0)?this._states.once=new u(t,this.options.timezone||this.options.utcOffset):this._states.pattern=new f(t,this.options.timezone),this.name){if(g.find(o=>o.name===this.name))throw new Error("Cron: Tried to initialize new named job '"+this.name+"', but name already taken.");g.push(this)}return s!==void 0&&(this.fn=s,this.schedule()),this}a.prototype.nextRun=function(t){const e=this._next(t);return e?e.getDate():null};a.prototype.nextRuns=function(t,e){t>this._states.maxRuns&&(t=this._states.maxRuns);const n=[];let r=e||this._states.currentRun;for(;t--&&(r=this.nextRun(r));)n.push(r);return n};a.prototype.getPattern=function(){return this._states.pattern?this._states.pattern.pattern:void 0};a.prototype.isRunning=function(){const t=this.msToNext(this._states.currentRun),e=!this._states.paused,n=this.fn!==void 0,r=!this._states.kill;return e&&n&&r&&t!==null};a.prototype.isStopped=function(){return this._states.kill};a.prototype.isBusy=function(){return this._states.blocking};a.prototype.currentRun=function(){return this._states.currentRun?this._states.currentRun.getDate():null};a.prototype.previousRun=function(){return this._states.previousRun?this._states.previousRun.getDate():null};a.prototype.msToNext=function(t){const e=this._next(t);return t=new u(t,this.options.timezone||this.options.utcOffset),e?e.getTime(!0)-t.getTime(!0):null};a.prototype.stop=function(){this._states.kill=!0,this._states.currentTimeout&&clearTimeout(this._states.currentTimeout);const t=g.indexOf(this);t>=0&&g.splice(t,1)};a.prototype.pause=function(){return this._states.paused=!0,!this._states.kill};a.prototype.resume=function(){return this._states.paused=!1,!this._states.kill};a.prototype.schedule=function(t,e){if(t&&this.fn)throw new Error("Cron: It is not allowed to schedule two functions using the same Croner instance.");t&&(this.fn=t);let n=this.msToNext(e||this._states.currentRun);const r=this.nextRun(e||this._states.currentRun);return n===null||r===null?this:(n>x&&(n=x),this._states.currentTimeout=setTimeout(()=>this._checkTrigger(r),n),this._states.currentTimeout&&this.options.unref&&L(this._states.currentTimeout),this)};a.prototype._trigger=async function(t){if(this._states.blocking=!0,this._states.currentRun=new u(void 0,this.options.timezone||this.options.utcOffset),this.options.catch)try{await this.fn(this,this.options.context)}catch(e){w(this.options.catch)&&this.options.catch(e,this)}else await this.fn(this,this.options.context);this._states.previousRun=new u(t,this.options.timezone||this.options.utcOffset),this._states.blocking=!1};a.prototype.trigger=async function(){await this._trigger()};a.prototype._checkTrigger=function(t){const e=new Date,n=!this._states.paused&&e.getTime()>=t,r=this._states.blocking&&this.options.protect;n&&!r?(this._states.maxRuns--,this._trigger()):n&&r&&w(this.options.protect)&&setTimeout(()=>this.options.protect(this),0),this.schedule(void 0,e)};a.prototype._next=function(t){const e=!!(t||this._states.currentRun);t=new u(t,this.options.timezone||this.options.utcOffset),this.options.startAt&&t&&t.getTime()<this.options.startAt.getTime()&&(t=this.options.startAt);const n=this._states.once||new u(t,this.options.timezone||this.options.utcOffset).increment(this._states.pattern,this.options,e);return this._states.once&&this._states.once.getTime()<=t.getTime()||n===null||this._states.maxRuns<=0||this._states.kill||this.options.stopAt&&n.getTime()>=this.options.stopAt.getTime()?null:n};a.Cron=a;a.scheduledJobs=g;function X(t){if(t.last_executions_info===void 0||t.last_executions_info===null)return null;{const e=t.last_executions_info;return e.running!==null?y(e.running.timestamp,"shortest"):e.terminated!==null?y(e.terminated.timestamp,"shortest"):null}}function tt(t,e,n){if(t===void 0||t.type==="now")return null;if(t.type==="cron"){if(t.pattern===void 0)return null;{const s=a(t.pattern).nextRun();if(s===null)return null;if(n!==void 0){if(n==="date")return s.toISOString();if(n==="string")return y(s,"shortest")}else return y(s,"shortest")}}else return null;return null}const F=O({__name:"ConfirmDeletePlan",props:{id:{},inPlace:{type:Boolean},page:{},store:{}},emits:["close"],setup(t,{expose:e,emit:n}){e();const r=t,{id:s,inPlace:i,page:o,store:l}=v(r),p=P(""),c=n,_={props:r,id:s,inPlace:i,page:o,store:l,confirmation:p,emit:c,cancel:()=>{c("close")},proceed:async()=>{if(p.value==="DELETE")if(await E(s.value),l!==void 0&&l.value!==void 0)await N(l.value.id,l.value.name),c("close");else if(i?.value===!0){let D=1;o!==void 0&&o.value&&(D=o.value),await R(D),c("close")}else window.location.replace("/plans/")}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),j={class:"inputWrapper"},Z={class:"inputWrapper"},H=["disabled"];function Y(t,e,n,r,s,i){return z(),U(A,null,[e[2]||(e[2]=d("p",null,"You are about to delete a plan. This action cannot be undone.",-1)),e[3]||(e[3]=d("p",null,"Type 'DELETE' to proceed.",-1)),d("form",{class:"form",onSubmit:T(r.proceed,["prevent"])},[d("div",j,[e[1]||(e[1]=d("label",{for:"confirmDelete"},null,-1)),k(d("input",{type:"text",id:"confirmDelete",name:"confirmDelete","onUpdate:modelValue":e[0]||(e[0]=o=>r.confirmation=o)},null,512),[[S,r.confirmation]])]),d("div",Z,[d("button",{onClick:T(r.cancel,["prevent"]),class:"button"},"Cancel"),d("button",{onClick:T(r.proceed,["prevent"]),class:"button button--destructive",disabled:r.confirmation!=="DELETE"}," Delete ",8,H)])],32)],64)}const et=M(F,[["render",Y],["__scopeId","data-v-d2468d58"]]);export{et as C,tt as a,X as g};
