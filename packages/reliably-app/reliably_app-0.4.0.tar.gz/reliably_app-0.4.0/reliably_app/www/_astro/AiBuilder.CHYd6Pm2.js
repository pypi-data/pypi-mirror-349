import{v as Te,d as G,w as h,a as Ye,c as Ht}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{d as mt}from"./dayjs.min.xlbmdZiw.js";import{e as Ot,a as jt,s as Kt,b as Je,c as Mt,p as Wt,d as Rt,r as Vt}from"./scenarios.Bt8TSrLt.js";import{t as qt,a as Ut}from"./templates.C0LiUYsE.js";import{i as Yt}from"./experiments.E3MiUWYx.js";import{b as Jt,f as pt,c as Qt}from"./integrations.CUprebZ9.js";import{f as Ft,e as Gt}from"./deployments._Dzuk3-5.js";import{f as vt,b as ft}from"./environments.zePoF_Ox.js";import{j as zt,i as Qe,h as Xt,e as Zt,c as $t}from"./plans.CKfMLPs_.js";import{f as ea}from"./deployments._oxKRVlY.js";import{c as Fe,t as ta,i as aa}from"./strings.Fm4VVZpd.js";/* empty css                       */import{_ as z}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as ne,t as re,h as l,c as o,a as e,n as ee,j as P,e as v,r as s,g as ge,p as _e,o as Ge,b as p,w as Z,b0 as Be,F as N,k as $,L as b,f as gt,i as F,l as ia}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{c as sa,h as _t,g as na}from"./executions.DP8bhDFR.js";import{u as q}from"./index.CwJxcYEt.js";import{X as la}from"./XIcon.BeaDfJr1.js";import"./notifications.NSMm1_5U.js";import"./index.BSdFiPHn.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./loader.BQDlK3Tc.js";import"./experiments.rwiqw3d6.js";import"./objects.CrQdKsRW.js";import"./duration.BGVtNWJ9.js";const oa=ne({__name:"SuggestionItem",props:{item:{},index:{},total:{}},setup(I,{expose:t}){t();const g=I,{item:a,index:c,total:u}=re(g),i={props:g,item:a,index:c,total:u,get breakableName(){return Fe}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),ra={class:"suggestionItem"},ua={class:"suggestionItem__meta"},ca=["innerHTML"],da={class:"suggestionItem__description"},ma={key:0,class:"suggestionItem__port suggestionItem__port--input"},pa={key:1,class:"suggestionItem__port suggestionItem__port--output"};function va(I,t,g,a,c,u){return l(),o("article",ra,[e("div",ua,[e("span",{class:ee(`suggestionItem__type suggestionItem__type--${a.item.type}`)},P(a.item.type),3)]),e("div",{class:"suggestionItem__name",innerHTML:a.breakableName(a.item.name)},null,8,ca),e("div",da,P(a.item.purpose),1),a.index>0?(l(),o("div",ma)):v("",!0),a.index<a.total-1?(l(),o("div",pa)):v("",!0)])}const fa=z(oa,[["render",va],["__scopeId","data-v-26ee59c9"]]),_a=ne({__name:"ScenarioParameter",props:{parameter:{},itemIndex:{},paramIndex:{},history:{}},emits:["update-parameter"],setup(I,{expose:t,emit:g}){t();const a=I,{parameter:c,itemIndex:u,paramIndex:i,history:f}=re(a),A=g,S=s(!1),H=s(!1),w=s(L(c.value.parameter.default));function U(m){w.value=m,D.value?.focus(),b(()=>{K()})}const y=ge(()=>{const m=[];return f&&f.value&&f.value.length&&f.value.forEach(_=>{_.type===c.value.parameter.type&&m.push(L(_.value))}),m}),O=s(!1);function x(){c.value.parameter.type==="object"&&(O.value=!aa(w.value)),O.value===!1&&(H.value?A("update-parameter",Y(w.value),c.value.parameter.key,u.value,i.value,!0):A("update-parameter",Y(w.value),c.value.parameter.key,u.value,i.value),D.value.setAttribute("disabled",""),S.value=!1)}function W(){S.value||(S.value=!0,H.value=!0,D.value.removeAttribute("disabled"))}const D=s(null),j=s(0);function K(){D.value&&(D.value.style.height="5px",D.value.style.height=D.value.scrollHeight+"px")}function Y(m){const _=c.value.parameter.type;return _==="string"?m:_==="boolean"?m==="true":_==="float"||_==="number"?parseFloat(m):_==="integer"?parseInt(m):_==="object"?JSON.parse(m):m}function L(m){const _=c.value.parameter.type;return _==="string"?m:_==="boolean"?m===!0?"true":"false":_==="float"||_==="number"||_==="integer"?m.toString():_==="object"?JSON.stringify(m):m.toString()}_e(w,()=>{K()}),Ge(()=>{S.value=!0,D.value?.focus()});const C={props:a,parameter:c,itemIndex:u,paramIndex:i,history:f,emit:A,isActive:S,wasReactivated:H,value:w,setValue:U,filteredHistory:y,isJSONInvalid:O,submitParameter:x,reactivate:W,input:D,textareaHeight:j,updateTextareaHeight:K,stringToTyped:Y,typedToString:L,get breakableName(){return Fe},get trimString(){return ta}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),ga=["onKeyup"],ya={class:"scenarioParameter__inputWrapper"},Ia=["for"],ha={class:"scenarioParameterLabel__title"},Aa=["innerHTML"],ba={class:"promptWrapper"},xa=["name","id"],Da={key:0,class:"AiDialogItem__help"},ka=["onClick"],Sa={key:1,class:"AiDialogItem__help"},wa={key:2,class:"AiDialogItem__help"},Ea={key:3,class:"AiDialogItem__help"},Pa={key:4,class:"AiDialogItem__help AiDialogItem__help--error"};function Ca(I,t,g,a,c,u){return l(),o("form",{class:ee(["scenarioParameter",{"scenarioParameter--inactive":!a.isActive,"scenarioParameter--error":a.isJSONInvalid}]),onClick:h(a.reactivate,["prevent"]),onKeyup:G(h(a.submitParameter,["exact","prevent"]),["enter"])},[e("div",ya,[e("label",{class:"scenarioParameterLabel",for:`scenarioParameterInput-${a.itemIndex}-${a.paramIndex}`},[e("span",ha,P(a.parameter.parameter.title),1),t[2]||(t[2]=p(" for ")),e("span",{class:ee(`scenarioParameterLabel__type scenarioParameterLabel__type--${a.parameter.item_type}`)},P(a.parameter.item_type),3),t[3]||(t[3]=p("  ")),e("span",{class:"scenarioParameterLabel__item",innerHTML:a.breakableName(a.parameter.item_name)},null,8,Aa)],8,Ia),e("div",ba,[Z(e("textarea",{class:"scenarioParameter__input",name:`scenarioParameterInput-${a.itemIndex}-${a.paramIndex}`,id:`scenarioParameterInput-${a.itemIndex}-${a.paramIndex}`,"onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),style:Be(`height: ${a.textareaHeight}px`),ref:"input","data-enable-grammarly":"false",onKeydown:t[1]||(t[1]=G(h(()=>{},["exact","prevent"]),["enter"]))},null,44,xa),[[Te,a.value]]),e("button",{class:"promptButton",onClick:h(a.submitParameter,["prevent"]),ref:"questionButton"},t[4]||(t[4]=[p(" ↵ "),e("span",{class:"screen-reader-text"},"Submit parameter",-1)]),512)]),a.isActive&&a.filteredHistory.length?(l(),o("p",Da,[t[5]||(t[5]=p(" Values used for similarly named parameters: ")),(l(!0),o(N,null,$(a.filteredHistory,i=>(l(),o("button",{key:i,onClick:h(f=>a.setValue(i),["prevent"]),class:"scenarioParameter__historyItem"},P(a.trimString(i,64)),9,ka))),128))])):v("",!0),a.parameter.parameter.type==="boolean"?(l(),o("p",Sa,t[6]||(t[6]=[p(" Expected parameter type: "),e("strong",null,"boolean",-1),p(". Type 'true' or 'false'. All other values will be considered as a boolean 'false'. ")]))):a.parameter.parameter.type==="object"?(l(),o("p",wa,t[7]||(t[7]=[p(" Expected parameter type: "),e("strong",null,"JSON object or array",-1),p(". Use shift + enter for a new line. Enter to submit. ")]))):(l(),o("p",Ea,[t[8]||(t[8]=p(" Expected parameter type: ")),e("strong",null,P(a.parameter.parameter.type),1)])),a.isJSONInvalid?(l(),o("p",Pa," Input is not valid JSON. ")):v("",!0)])],42,ga)}const La=z(_a,[["render",Ca],["__scopeId","data-v-a725b01a"]]),Ta=ne({__name:"NoParameterPlaceholder",props:{item:{},debug:{type:Boolean}},emits:["go-to-next"],setup(I,{expose:t,emit:g}){t();const a=I,{item:c,debug:u}=re(a),i=g;Ge(()=>{u&&u.value&&console.log(`Force go-to-next for item ${c.value.name}`),i("go-to-next")});const f={props:a,item:c,debug:u,emit:i};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),Ba={key:0};function Na(I,t,g,a,c,u){return a.debug?(l(),o("div",Ba,[t[0]||(t[0]=e("div",null,[e("strong",null,"HERE IS A PLACEHOLDER")],-1)),e("div",null,P(a.item),1)])):v("",!0)}const Ha=z(Ta,[["render",Na]]),Oa={},ja={viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"};function Ka(I,t){return l(),o("svg",ja,t[0]||(t[0]=[gt('<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>',1)]))}const yt=z(Oa,[["render",Ka]]),Ma=ne({__name:"ScenarioExecution",props:{planId:{}},setup(I,{expose:t}){t();const g=I,{planId:a}=re(g),c=s(null),u=q(zt),i=s("scenarioExecution__loader--creating"),f=s(!1);let A;const S=s(""),H=s(""),w=q(sa),U=ge(()=>w.value!==null&&w.value!==void 0&&w.value.user_state!==null&&w.value.user_state.current==="finished"),y=s("Your experiment is being scheduled");async function O(){u.value?.status==="creating"||u.value?.status==="created"||u.value?.status==="scheduled"?(i.value="scenarioExecution__loader--creating",y.value="Your experiment is scheduled and will start soon",await Qe(a.value)):u.value?.status==="creation error"?(i.value="",y.value="We encountered an error while scheduling your experiment",clearInterval(A),f.value=!0,_()):u.value?.status==="error"?(i.value="",y.value="We encountered an error while running your experiment",clearInterval(A),f.value=!0,_()):u.value?.status==="running"?(i.value="scenarioExecution__loader--running",y.value="Your experiment is running",clearInterval(A),K=setInterval(Y,5e3)):(i.value="scenarioExecution__loader--creating",y.value="Your experiment is scheduled and will start soon",await Qe(a.value))}const x=s({label:"Unknown",type:"unknown"}),W=s(!1);function D(k){x.value=k}function j(){const k=na(w.value);D(k)}let K;async function Y(){await Xt(a.value,1);const k=q(Zt);k.value.total>0&&(clearInterval(K),S.value=k.value.executions[0].id,H.value=k.value.executions[0].experiment_id,await _t(S.value,H.value),L=setInterval(C,5e3))}let L;async function C(){U.value?(j(),i.value="",clearInterval(L),x.value.label==="Completed"?y.value="Experiment completed!":x.value.label==="Rollbacks failed"?y.value="Experiment is finished, but rollbacks failed":x.value.label==="Initial system condition not met"?y.value="Experiment did not run as initial condition was not met":x.value.label==="Deviated"?y.value="Experiment deviated...":x.value.label==="Aborted"?y.value="Experiment aborted...":x.value.label==="Failed"?y.value="Experiment failed...":(y.value="Experiment is finished, but its status is unknown",W.value=!0),_()):(i.value="scenarioExecution__loader--running",y.value="Your experiment is running",await _t(S.value,H.value))}const m=ge(()=>!f.value&&U.value);function _(){b(()=>{c.value&&c.value.classList.add("scenarioExecution__result--large")})}Ge(async()=>{await Qe(a.value),A=setInterval(O,5e3)});const X={props:g,planId:a,scenarioExecutionEmoji:c,p:u,loaderClass:i,hasPlanError:f,get refreshPlanInterval(){return A},set refreshPlanInterval(k){A=k},id:S,expId:H,currentExecution:w,isExecutionFinished:U,displayedStatus:y,refreshPlan:O,status:x,isUnknownEmojiDisplayed:W,setStatus:D,getStatus:j,get refreshExecutionsListInterval(){return K},set refreshExecutionsListInterval(k){K=k},refreshExecutionsList:Y,get refreshExecutionInterval(){return L},set refreshExecutionInterval(k){L=k},refreshExecution:C,isLinkDisplayed:m,makeEmojiLargeAgain:_,LoaderPuff:yt};return Object.defineProperty(X,"__isScriptSetup",{enumerable:!1,value:!0}),X}}),Wa={class:"scenarioExecution"},Ra={class:"scenarioExecution__status text-center"},Va={class:"scenarioExecution__result text-center",ref:"scenarioExecutionEmoji"},qa={key:0,class:"scenarioExecution__emoji"},Ua={key:1,class:"scenarioExecution__emoji"},Ya={key:2,class:"scenarioExecution__emoji"},Ja={key:3,class:"scenarioExecution__emoji"},Qa={key:4,class:"scenarioExecution__emoji"},Fa={key:5,class:"scenarioExecution__emoji"},Ga={key:1,class:"scenarioExecution__link text-center"},za=["href"];function Xa(I,t,g,a,c,u){return l(),o("div",Wa,[e("div",Ra,P(a.displayedStatus),1),a.loaderClass!==""?(l(),o("div",{key:0,class:ee(["scenarioExecution__loader",a.loaderClass])},[F(a.LoaderPuff)],2)):v("",!0),e("div",Va,[a.hasPlanError?(l(),o("span",qa," ⛔ ")):a.status.label==="Completed"?(l(),o("span",Ua," 🎉 ")):a.status.label==="Deviated"||a.status.label==="Rollbacks failed"?(l(),o("span",Ya," 💥 ")):a.status.label==="Aborted"||a.status.label==="Initial system condition not met"?(l(),o("span",Ja," ⛔ ")):a.status.label==="Failed"?(l(),o("span",Qa," ❌ ")):a.isExecutionFinished&&a.isUnknownEmojiDisplayed?(l(),o("span",Fa,"❓")):v("",!0)],512),a.isLinkDisplayed?(l(),o("div",Ga,[e("a",{href:`/executions/view/?id=${a.id}&exp=${a.expId}`}," View execution details and timeline ",8,za)])):v("",!0)])}const Za=z(Ma,[["render",Xa]]),$a=ne({__name:"ScenarioActivityInfo",props:{activity:{}},setup(I,{expose:t}){t();const g=I,{activity:a}=re(g),c=ge(()=>{const i="activityInfo__type";return`${i} ${i}--${a.value.type}`}),u={props:g,activity:a,typeClass:c,get breakableName(){return Fe}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),ei=["innerHTML"];function ti(I,t,g,a,c,u){return l(),o(N,null,[t[0]||(t[0]=e("span",{class:"activityInfo"},null,-1)),e("span",{class:ee(a.typeClass)},P(a.activity.type),3),t[1]||(t[1]=p(" ")),e("span",{class:"activityInfo__name",innerHTML:a.breakableName(a.activity.name)},null,8,ei)],64)}const ai=z($a,[["render",ti],["__scopeId","data-v-a30c9e0f"]]),ii=ne({__name:"ScenarioNotificationHandler",emits:["place-error"],setup(I,{expose:t,emit:g}){t();const a=g,c=q(Ot);_e(c,()=>{u()});function u(){const f=c.value[0];a("place-error",f),jt()}const i={emit:a,list:c,placeError:u};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function si(I,t,g,a,c,u){return null}const ni=z(ii,[["render",si]]),li={},oi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-lock"};function ri(I,t){return l(),o("svg",oi,t[0]||(t[0]=[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1),e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)]))}const ui=z(li,[["render",ri]]),ci=ne({__name:"AiBuilder",props:{isSmall:{type:Boolean}},setup(I,{expose:t}){t();const g=I,{isSmall:a}=re(g),c=s(!1),u=s(null),i=s(null),f=s(null),A=s(null),S=s(null),H=s(null),w=ge(()=>!!(X.value||ue.value&&!Ne.value||Ae.value&&!be.value||me.value||ve.value)),U=s(!1),y=s([]),O=s(0),x=s([]),W=s(1),D=q(Jt),j=s("");async function K(){await pt(1),O.value=D.value.total,W.value=Math.ceil(O.value/10),D.value.integrations.forEach(r=>{r.vendor&&r.vendor==="reliably"&&r.provider==="assistant"&&y.value.push(r)}),await Y()}async function Y(){W.value>1&&(x.value=Array.from(Array(W.value+1),(r,n)=>n),x.value.shift(),x.value.shift());for(let r of x.value)await pt(r),D.value.integrations.forEach(n=>{n.vendor&&n.vendor==="reliably"&&n.provider==="assistant"&&y.value.push(n)});y.value.length===0?(U.value=!0,b(()=>{C.value.focus()})):y.value.length===1&&(j.value=y.value[0].id,b(()=>{te.value.focus()}))}function L(){b(()=>{f.value.classList.remove("AiDialogItem--hidden")})}const C=s(null),m=s(""),_=s(!1),X=s(!1),k=s(!1);async function It(){if(m.value!==""){_.value=!1,X.value=!0;const n={name:"Assistant integration - "+mt().format("YYYY-MM-DDTHH:mm:ssZ"),provider:"assistant",vendor:"reliably",environment:{name:"openai",envvars:[{var_name:"OPENAI_MODEL",value:"gpt-4-1106-preview"}],secrets:[{key:"openai-key",var_name:"OPENAI_API_KEY",value:m.value}]}},d=await Qt(n,!0);c.value?(j.value="azerty",L()):d&&(j.value=d.id,L()),m.value=m.value.replace(/./g,"•"),C.value.setAttribute("disabled",""),k.value=!0,X.value=!1}else _.value=!0}const R=q(Kt),le=s(""),ht=[{tag:"aws",label:"AWS"},{tag:"google cloud",label:"Google Cloud"},{tag:"kubernetes",label:"Kubernetes"},{tag:"on-premise",label:"On-Premise"}],ye=s([]),Ie=s(!1),he=s(!1);async function At(){u.value!==null&&(u.value.showModal(),document.body.classList.add("no-scroll"),await K(),setTimeout(()=>{u.value.classList.remove("reliablyDialog--transparent")},100),setTimeout(()=>{u.value.classList.remove("AiDialog__content--hidden")},400),ze())}function bt(){u.value!==null&&(u.value.close(),ct())}function ze(){const r=i.value?.querySelectorAll(".AiDialogItem");if(r&&r.length){let n=0;r.forEach(d=>{setTimeout(()=>{d.classList.remove("AiDialogItem--hidden")},n*800),n++})}}const ue=s(!1),Ne=s(!1);function xt(){}function Dt(r){le.value!==""&&(te.value?.setAttribute("disabled",""),i.value?.classList.remove("AiDialog__content--initial"),Ie.value?ye.value.length?(ue.value=!0,He()):he.value?(ue.value=!0,De.value+=le.value,He()):(he.value=!0,b(()=>{H.value?.focus()})):(Ie.value=!0,b(()=>{S.value?.focus()})),b(()=>{T()}))}async function He(){const r={question:le.value,tags:ye.value,integration_id:j.value};c.value?await Je("1"):await Mt(r),R.value!==null&&(R.value.suggestion===void 0?Wt({title:"Something went wrong when creating your experiment",message:"Improper server response."}):ce=setInterval(Xe,3e3)),b(()=>{T()})}var ce;async function Xe(){if(R.value!==null){if(c.value){const r=(parseInt(R.value.id)+1).toString();await Je(r)}await Je(R.value.id),R.value.completed&&(clearInterval(ce),$e(),je(),Ne.value=!0)}b(()=>{T()})}const de=s([]),J=s(null),V=s([]),Ze=s([]),oe=s({});function $e(){let r=0;R.value.suggestion.items.forEach(n=>{de.value.push({name:n.name,type:n.type,count:n.parameters.length,parameters:[]}),n.parameters.length&&n.parameters.forEach(d=>{de.value[r].parameters.push({item_name:n.name,item_ref:n.ref,item_type:n.type,parameter:d,user_value:null})}),r++,De.value+=` ${r}. ${n.purpose}`})}const Ae=s(!1),be=s(!1),me=s(!1),Oe=s(!1);function je(){let r=!1;if(J.value===null||J.value.parameters.length===0){const n=de.value.shift();n?(J.value=n,V.value.push({name:J.value.name,type:J.value.type,count:J.value.count,parameters:[]}),r=!0):(Ae.value=!0,et())}else r=!0;if(r){const n=J.value.parameters.shift();n!==void 0&&V.value[V.value.length-1].parameters.push(n)}b(()=>{T()})}function kt(r,n,d,B,E){if(V.value[d].parameters[B].user_value=r,oe.value[n]?oe.value[n].findIndex(fe=>fe.value===r)===-1&&oe.value[n].push({value:r,type:V.value[d].parameters[B].parameter.type}):oe.value[n]=[{value:r,type:V.value[d].parameters[B].parameter.type}],E){b(()=>{T()});const Q=i.value.lastElementChild;Q.classList.contains("AiDialogItem--parameter")&&Q.querySelector(".scenarioParameter__input").focus()}else je()}const M=s({version:"1.0.0",title:"",description:"",contributions:{availability:"none",latency:"none",security:"none",errors:"none"},tags:[],configuration:{},extensions:[{name:"reliablyui",workflow:{hypothesis:[],warmup:[],method:[],rollbacks:[]},builder:{question:""}}],method:[],"steady-state-hypothesis":{title:"Verification",probes:[]},rollbacks:[],runtime:{hypothesis:{strategy:"default",frequency:1,fail_fast:!1},rollbacks:{strategy:"default"}}}),xe=q(qt),pe=s(""),De=s(""),ke=s(1);async function et(){M.value.description=De.value,await tt(),be.value=!0,b(()=>{ae.value.focus(),T()})}async function tt(){M.value.method=[],M.value.extensions[0].workflow.method=[];for(const[r,n]of R.value.suggestion.items.entries()){if(await Ut(n.ref),xe.value){const d=xe.value.manifest.spec.template,B=`M${ke.value.toString().padStart(3,"0")}`;let E=null;if(d.method&&d.method.length>0?E=JSON.parse(JSON.stringify(d.method[0])):d["steady-state-hypothesis"]&&d["steady-state-hypothesis"].probes&&d["steady-state-hypothesis"].probes.length>0?E=JSON.parse(JSON.stringify(d["steady-state-hypothesis"].probes[0])):d.rollbacks&&d.rollbacks.length>0&&(E=JSON.parse(JSON.stringify(d.rollbacks[0]))),E!==null){let Q={template:xe.value,suffix:B,background:!1,fieldsStatus:[]};E.name=n.name;const fe=Object.keys(E.provider.arguments);fe.length&&fe.forEach(ie=>{let Le;if(V.value[r].parameters.length&&(Le=V.value[r].parameters.find(se=>se.item_name===void 0?!1:se.item_name===n.name&&se.parameter.key===ie)),Le){const se=`${ie}_${B}`;M.value.configuration[se]={type:"env",key:`RELIABLY_${se.toUpperCase()}`,default:Le.user_value,env_var_type:Le.parameter.type},E.provider.arguments[ie]="${"+se+"}",Q.fieldsStatus.push(!0)}else delete E.provider.arguments[ie],Q.fieldsStatus.push(!1)}),M.value.method.push(E),M.value.extensions[0].workflow.method.push(Q)}}ke.value++}}const Se=s("");async function St(){me.value=!0,ae.value.setAttribute("disabled","");let r=`Experiment - ${mt().format()}`;pe.value!==""&&(r=pe.value),M.value.title=r;let n;c.value?n="7":n=await Yt({experiment:JSON.stringify(M.value)},!1,!0),n&&(Se.value=n,await Rt(R.value.id,n),me.value=!1,Oe.value=!0),b(()=>{T()})}const ve=s(!1),Ke=s(!1),we=s(!1),Ee=s(!1),Me=s(""),We=s(""),Re=s(null),at=s(null),Ve=s([]),Pe=s(0),Ce=s(1),qe=async()=>{await Ft(Ce.value);let r=q(Gt);Pe.value=r.value.total,r.value.deployments.forEach(n=>{n.definition.type!=="github"&&Ve.value.push({name:n.name,id:n.id,type:n.definition.type})}),Ce.value++},it=async()=>{for(let r=1;10*r<Pe.value;r++)await qe()},Ue=s([]);async function st(){let r=[];await vt(1);let n=q(ft);if(n.value.environments.forEach(B=>{r.push({name:B.name,id:B.id})}),n.value.total>10){let B=Math.floor(n.value.total/10);n.value.total%10>0&&B++;let E=[];for(var d=2;d<=B;d++)E.push(d);for(const Q of E)await vt(Q),q(ft).value.environments.forEach(ie=>{r.push({name:ie.name,id:ie.id})})}Ue.value=[...r]}async function wt(){ve.value=!0,await qe(),await it(),await st(),ve.value=!1,Ke.value=!0,b(()=>{Re.value.focus(),T()})}function Et(){we.value===!1&&(we.value=!0,b(()=>{at.value.focus(),T()}))}function Pt(){Ee.value===!1&&(Ee.value=!0,b(()=>{Re.value.focus(),T()}))}const nt=s(""),lt=s(!1);async function Ct(){let r={title:M.value.title,environment:{provider:"reliably_cloud",id:We.value},deployment:{deployment_id:Me.value},schedule:{type:"now"},experiments:[Se.value],integrations:[]};const n=await $t(r,!0);n&&(nt.value=n,lt.value=!0,b(()=>{T()}))}const te=s(null),Lt=s(0);function ot(){te.value&&(te.value.style.height="5px",te.value.style.height=te.value.scrollHeight+"px")}_e(le,()=>{ot()});const Tt=s(0);function rt(){C.value&&(C.value.style.height="5px",C.value.style.height=C.value.scrollHeight+"px")}_e(m,()=>{rt()});const ae=s(null),Bt=s(0);function ut(){ae.value&&(ae.value.style.height="5px",ae.value.style.height=ae.value.scrollHeight+"px")}_e(pe,()=>{ut()});function T(r){if(i.value.scrollHeight>window.innerHeight){const n=Math.max(i.value.getBoundingClientRect().bottom,i.value.scrollHeight);u.value.scrollTo({top:n,left:0,behavior:"smooth"})}}function ct(){document.body.classList.remove("no-scroll"),U.value=!1,y.value=[],O.value=0,x.value=[],W.value=1,j.value="",m.value="",_.value=!1,X.value=!1,k.value=!1,le.value="",ye.value=[],de.value=[],J.value=null,V.value=[],Ze.value=[],oe.value={},M.value={version:"1.0.0",title:"",description:"",contributions:{availability:"none",latency:"none",security:"none",errors:"none"},tags:[],configuration:{},extensions:[{name:"reliablyui",workflow:{hypothesis:[],warmup:[],method:[],rollbacks:[]},builder:{question:""}}],method:[],"steady-state-hypothesis":{title:"Verification",probes:[]},rollbacks:[],runtime:{hypothesis:{strategy:"default",frequency:1,fail_fast:!1},rollbacks:{strategy:"default"}}},Ie.value=!1,he.value=!1,ue.value=!1,Ae.value=!1,be.value=!1,me.value=!1,Oe.value=!1,pe.value="",ke.value=1,Se.value="",ve.value=!1,Ke.value=!1,we.value=!1,Ee.value=!1,Me.value="",We.value="",Ve.value=[],Pe.value=0,Ce.value=1,Ue.value=[],Vt()}function Nt(r){const n=`<div class="AiDialogItem AiDialogItem--error">
    <div class="AiDialogItem__content">
      <p>
        <strong>${r.title}</strong><br/>
        ${r.message}<br/>
        Please try again later.
      </p>
    </div>
  </div>`,d=i.value.lastElementChild;d===null?i.value.insertAdjacentHTML("beforeend",n):d.querySelector(".AiDialogItem__loader")!==null?d.insertAdjacentHTML("beforebegin",n):d.insertAdjacentHTML("afterend",n),clearInterval(ce)}const dt={props:g,isSmall:a,localMode:c,aiDialog:u,aiDialogContent:i,promptWrapper:f,questionButton:A,tagsButton:S,warningButton:H,isLoaderDisplayed:w,isIntegrationRequired:U,assistantIntegrationsList:y,intsTotal:O,intsArray:x,totalPages:W,ints:D,assistantId:j,getInitialIntegrations:K,lookForMoreAssistantIntegrations:Y,revealPromptWrapper:L,secretKeyInput:C,secretKey:m,isSecretInvalid:_,isIntegrationCreating:X,isSecretStored:k,submitOpenAiKey:It,s:R,prompt:le,tagsList:ht,tags:ye,isTagsSelectionDisplayed:Ie,isTagsWarningDisplayed:he,openAssistant:At,closeAssistant:bt,startAssistant:ze,isQuestionAsked:ue,isAnswerComplete:Ne,doNothing:xt,askQuestion:Dt,sendQuery:He,get refreshInterval(){return ce},set refreshInterval(r){ce=r},refreshScenario:Xe,parametersArray:de,currentSuggestion:J,displayedSuggestions:V,displayedParameters:Ze,parametersHistory:oe,populateParametersArray:$e,isExperimentBuilding:Ae,isExperimentReady:be,isExperimentSaving:me,isExperimentSaved:Oe,addNextParameter:je,handleParameter:kt,e:M,t:xe,experimentTitle:pe,experimentDescription:De,counter:ke,buildExperiment:et,buildMethod:tt,returnedId:Se,saveExperiment:St,isPlanDataFetching:ve,isDeploymentSelectDisplayed:Ke,isEnvironmentSelectDisplayed:we,isRunDisplayed:Ee,deploymentId:Me,environmentId:We,deploySelect:Re,envSelect:at,deploys:Ve,totalDeploys:Pe,deploysPage:Ce,getDeployments:qe,getMoreDeployments:it,environmentsList:Ue,getEnvironments:st,startCreatingPlan:wt,displayEnvironmentSelect:Et,displayRun:Pt,planId:nt,isPlanScheduled:lt,savePlan:Ct,input:te,promptHeight:Lt,updatePromptHeight:ot,secretKeyHeight:Tt,updateSecretKeyHeight:rt,title:ae,titleHeight:Bt,updateTitleHeight:ut,scrollToBottom:T,handleAssistantClose:ct,placeError:Nt,get formatDeploymentType(){return ea},SuggestionItem:fa,ScenarioParameter:La,NoParameterPlaceholder:Ha,ScenarioExecution:Za,ScenarioActivityInfo:ai,ScenarioNotificationHandler:ni,LoaderPuff:yt,LockIcon:ui,XIcon:la};return Object.defineProperty(dt,"__isScriptSetup",{enumerable:!1,value:!0}),dt}}),di={class:"AiBuilder__content"},mi={key:0},pi={key:1},vi={class:"AiDialog__content AiDialog__content--initial",ref:"aiDialogContent"},fi={key:0,class:"AiDialogItem AiDialogItem--hidden"},_i={key:1,class:"AiDialogItem AiDialogItem--hidden"},gi={class:"AiDialogItem__content"},yi=["onKeyup"],Ii={class:"AiDialogItem__inputWrapper"},hi={class:"promptWrapper"},Ai={key:0,class:"AiDialogItem__help AiDialogItem__help--good"},bi={key:1,class:"AiDialogItem__help AiDialogItem__help--error"},xi={key:2,class:"AiDialogItem AiDialogItem--hidden"},Di={class:"AiDialogItem__content"},ki={class:"AiDialogItem__form"},Si={class:"AiDialogItem__inputWrapper"},wi={class:"promptWrapper"},Ei=["value"],Pi={key:3,class:"AiDialogItem AiDialogItem--hidden",ref:"promptWrapper"},Ci={class:"AiDialogItem__content"},Li={class:"AiDialogItem__inputWrapper"},Ti={class:"promptWrapper"},Bi={key:4,class:"AiDialogItem"},Ni={class:"AiDialogItem__content"},Hi={class:"AiDialogItem__inputWrapper"},Oi={class:"AiDialogItem__tags"},ji=["id","value"],Ki=["for"],Mi={key:5,class:"AiDialogItem"},Wi={class:"AiDialogItem__content"},Ri={class:"AiDialogItem__form"},Vi={key:6,class:"AiDialogItem"},qi={key:7,class:"AiDialogItem"},Ui={class:"list-reset AiDialog__suggestions"},Yi={key:8,class:"AiDialogItem"},Ji={class:"AiDialogItem"},Qi={class:"AiDialogItem__content"},Fi={class:"AiDialogItem__content"},Gi={key:9,class:"AiDialogItem"},zi={key:10,class:"AiDialogItem"},Xi={class:"AiDialogItem__content"},Zi=["onKeyup"],$i={class:"AiDialogItem__inputWrapper"},es={class:"promptWrapper"},ts={key:11,class:"AiDialogItem"},as={class:"AiDialogItem__content"},is={class:"AiDialogItem__options list-reset"},ss=["href"],ns=["href"],ls={key:12,class:"AiDialogItem"},os={class:"AiDialogItem__content"},rs={class:"AiDialogItem__form"},us={class:"AiDialogItem__inputWrapper"},cs={class:"promptWrapper"},ds=["value"],ms={key:13,class:"AiDialogItem"},ps={class:"AiDialogItem__content"},vs={class:"AiDialogItem__form"},fs={class:"AiDialogItem__inputWrapper"},_s={class:"promptWrapper"},gs=["value"],ys={key:14,class:"AiDialogItem"},Is={class:"AiDialogItem__content"},hs={class:"AiDialogItem__options list-reset"},As=["href"],bs=["href"],xs={key:15,class:"AiDialogItem"},Ds={class:"AiDialogItem__content"},ks={key:16,class:"AiDialogItem"},Ss={class:"AiDialogItem__loader"};function ws(I,t,g,a,c,u){return l(),o(N,null,[e("button",{onClick:h(a.openAssistant,["prevent","stop"]),class:"AiBuilder"},[e("div",di,[e("div",{class:ee(["AiIcon",{"AiIcon--small":a.isSmall}])},null,2),e("div",{class:ee(["AiBuilder__description",{"AiBuilder__description--small":a.isSmall}])},[t[14]||(t[14]=e("h2",null,"Builder Assistant",-1)),a.isSmall?(l(),o("p",mi,"Let the Assistant build your experiments.")):(l(),o("p",pi," Tell the Reliably Assistant what you want to investigate, and let it build an experiment for you. "))],2)])]),e("dialog",{class:"AiDialog reliablyDialog reliablyDialog--transparent",ref:"aiDialog",onClose:a.handleAssistantClose},[e("div",vi,[t[59]||(t[59]=gt('<div class="AiDialogItem AiDialogItem--hidden"><div class="AiDialogItem__icon"><div class="AiIcon AiIcon--small"></div></div><div class="AiDialogItem__content"><p class="AiDialogItem__message"> Welcome to the Reliably Assistant experiment builder. </p></div></div>',1)),a.isIntegrationRequired?(l(),o("div",fi,t[15]||(t[15]=[e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1),e("div",{class:"AiDialogItem__content"},[e("p",{class:"AiDialogItem__message"}," You don't have an Assistant integration set up yet. Reliably Assistant requires an OpenAI account. Let's set up the integration now. ")],-1)]))):v("",!0),a.isIntegrationRequired?(l(),o("div",_i,[t[20]||(t[20]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",gi,[e("form",{class:ee(["AiDialogItem__form",{"AiDialogItem__form--error":a.isSecretInvalid}]),onKeyup:G(h(a.submitOpenAiKey,["prevent"]),["enter"])},[e("div",Ii,[t[18]||(t[18]=e("label",{for:"aiSecretKey"}," OpenAI secret key ",-1)),e("div",hi,[Z(e("textarea",{class:"AiDialogItem__input",name:"aiSecretKey",id:"aiSecretKey","onUpdate:modelValue":t[0]||(t[0]=i=>a.secretKey=i),style:Be(`height: ${a.secretKeyHeight}px`),ref:"secretKeyInput","data-enable-grammarly":"false",onKeydown:t[1]||(t[1]=G(h(()=>{},["prevent"]),["enter"]))},null,36),[[Te,a.secretKey]]),e("button",{class:"promptButton",onClick:h(a.submitOpenAiKey,["prevent","stop"]),ref:"secretKeyButton"},t[16]||(t[16]=[p(" ↵ "),e("span",{class:"screen-reader-text"},"Submit OpenAI key",-1)]),512)]),a.isSecretStored?(l(),o("p",Ai,[F(a.LockIcon),t[17]||(t[17]=p(" Your OpenAI key is now safely stored! "))])):v("",!0),t[19]||(t[19]=e("p",{class:"AiDialogItem__help"},' Reliably Assistant uses ChatGPT-4 1106 Preview ("ChatGPT-4 Turbo"). Using the Assistant does not result in additional billing from Reliably but uses OpenAI tokens. ',-1)),a.isSecretInvalid?(l(),o("p",bi," OpenAI secret key can't be empty. ")):v("",!0)])],42,yi)])])):v("",!0),a.assistantIntegrationsList.length>1?(l(),o("div",xi,[t[23]||(t[23]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Di,[e("form",ki,[e("div",Si,[t[21]||(t[21]=e("label",{for:"aiDialogAssistantSelect"}," Select an Assistant Integration ",-1)),e("div",wi,[Z(e("select",{class:"AiDialogItem__input AiDialogItem__input--select",name:"aiDialogAssistantSelect",id:"aiDialogAssistantSelect","onUpdate:modelValue":t[2]||(t[2]=i=>a.assistantId=i),onChange:a.revealPromptWrapper},[(l(!0),o(N,null,$(a.assistantIntegrationsList,i=>(l(),o("option",{key:i.name,value:i.id},P(i.name),9,Ei))),128))],544),[[Ye,a.assistantId]])]),t[22]||(t[22]=e("p",{class:"AiDialogItem__help"}," The Assistant will use your OpenAI key declared in this integration. ",-1))])])])])):v("",!0),a.assistantId!==""?(l(),o("div",Pi,[t[28]||(t[28]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Ci,[e("form",{class:"AiDialogItem__form",onKeyup:t[6]||(t[6]=G(h(i=>a.askQuestion(),["prevent"]),["enter"]))},[e("div",Li,[t[25]||(t[25]=e("p",{class:"AiDialogItem__message"},"How can I help you?",-1)),t[26]||(t[26]=e("label",{class:"screen-reader-text",for:"aiDialogQuestion"}," Ask your question ",-1)),e("div",Ti,[Z(e("textarea",{class:"AiDialogItem__input",name:"aiDialogQuestion",id:"aiDialogQuestion","onUpdate:modelValue":t[3]||(t[3]=i=>a.prompt=i),style:Be(`height: ${a.promptHeight}px`),ref:"input","data-enable-grammarly":"false",onKeydown:t[4]||(t[4]=G(h(()=>{},["prevent"]),["enter"]))},null,36),[[Te,a.prompt]]),e("button",{class:"promptButton",onClick:t[5]||(t[5]=h(i=>a.askQuestion(),["prevent","stop"])),ref:"questionButton"},t[24]||(t[24]=[p(" ↵ "),e("span",{class:"screen-reader-text"},"Submit question",-1)]),512)]),t[27]||(t[27]=e("p",{class:"AiDialogItem__help"},[p(" Describe an experiment idea. The more specific you are about your system, the more useful the results will be."),e("br"),p(" Eg. I need to verify the impact of latency on an application served in Google Cloud Platform Cloud Run behind a GCP Load Balancer ")],-1))])],32)])],512)):v("",!0),a.isTagsSelectionDisplayed?(l(),o("div",Bi,[t[32]||(t[32]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Ni,[e("form",{class:"AiDialogItem__form",onKeyup:t[8]||(t[8]=G(h(i=>a.askQuestion(),["prevent"]),["enter"]))},[e("div",Hi,[t[29]||(t[29]=e("p",{class:"AiDialogItem__message"},[p(" Tags help me build an experiment with activities that are more suitable to your system. Select one or more tags and press "),e("span",{class:"key"},"Enter ↵"),p(" to continue. ")],-1)),e("div",Oi,[(l(),o(N,null,$(a.tagsList,(i,f)=>e("div",{key:i.tag},[Z(e("input",{type:"checkbox",id:`aiTag-${f}`,value:i.tag,"onUpdate:modelValue":t[7]||(t[7]=A=>a.tags=A)},null,8,ji),[[Ht,a.tags]]),e("label",{for:`aiTag-${f}`},P(i.label),9,Ki)])),64))]),t[30]||(t[30]=e("p",{class:"AiDialogItem__help"}," Keep in mind that selecting to many tags might limit the pool of activities the assistant can choose from. Be specific, but not too specific. ",-1))]),e("button",{class:"promptButton promptButton--hidden",onClick:h(a.doNothing,["prevent","stop"]),ref:"tagsButton"},t[31]||(t[31]=[p(" ↵ "),e("span",{class:"screen-reader-text"},null,-1)]),512)],32)])])):v("",!0),a.isTagsWarningDisplayed?(l(),o("div",Mi,[t[35]||(t[35]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Wi,[e("form",Ri,[t[34]||(t[34]=e("p",{class:"AiDialogItem__message"},[p(" Are you sure you want to continue without tags? This might result in an experiment that is not as suited to your system. Select one or more tags above and press "),e("span",{class:"key"},"Enter ↵"),p("."),e("br"),p(" Alternatively, you can press "),e("span",{class:"key"},"Enter ↵"),p(" to continue without tags. ")],-1)),e("button",{class:"promptButton promptButton--hidden",onClick:t[9]||(t[9]=h(i=>a.askQuestion(),["prevent","stop"])),ref:"warningButton"},t[33]||(t[33]=[p(" ↵ "),e("span",{class:"screen-reader-text"},"Submit without tags",-1)]),512)])])])):v("",!0),a.isQuestionAsked?(l(),o("div",Vi,t[36]||(t[36]=[e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1),e("div",{class:"AiDialogItem__content"},[e("p",{class:"AiDialogItem__message"}," Please wait while I create your experiment. ")],-1)]))):v("",!0),a.s&&a.s.suggestion?(l(),o("div",qi,[e("ol",Ui,[(l(!0),o(N,null,$(a.s.suggestion.items,(i,f)=>(l(),o("li",{key:i.name},[F(a.SuggestionItem,{item:i,index:f,total:a.s.suggestion.items.length},null,8,["item","index","total"])]))),128))])])):v("",!0),a.isAnswerComplete?(l(),o("div",Yi,t[37]||(t[37]=[e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1),e("div",{class:"AiDialogItem__content"},[e("p",{class:"AiDialogItem__message"}," Your experiment is almost ready. Let's fill in some required parameters. ")],-1)]))):v("",!0),(l(!0),o(N,null,$(a.displayedSuggestions,(i,f)=>(l(),o(N,{key:i.name},[i.count?(l(),o(N,{key:0},[e("div",Ji,[t[41]||(t[41]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Qi,[t[38]||(t[38]=p(" I need ")),e("strong",null,P(i.count),1),t[39]||(t[39]=p(" parameters for ")),F(a.ScenarioActivityInfo,{activity:i},null,8,["activity"]),t[40]||(t[40]=p(". "))])]),(l(!0),o(N,null,$(i.parameters,(A,S)=>(l(),o("div",{class:"AiDialogItem AiDialogItem--parameter",key:A.item_name+S},[t[42]||(t[42]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Fi,[F(a.ScenarioParameter,{parameter:A,"item-index":f,"param-index":S,history:a.parametersHistory[A.parameter.key],onUpdateParameter:a.handleParameter},null,8,["parameter","item-index","param-index","history"])])]))),128))],64)):(l(),ia(a.NoParameterPlaceholder,{key:1,item:i,onGoToNext:a.addNextParameter},null,8,["item"]))],64))),128)),a.isExperimentBuilding?(l(),o("div",Gi,t[43]||(t[43]=[e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1),e("div",{class:"AiDialogItem__content"},[e("p",{class:"AiDialogItem__message"}," Almost there! Please wait while I create your experiment. ")],-1)]))):v("",!0),a.isExperimentReady?(l(),o("div",zi,[t[48]||(t[48]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Xi,[e("form",{class:"AiDialogItem__form",onKeyup:G(h(a.saveExperiment,["prevent"]),["enter"])},[e("div",$i,[t[45]||(t[45]=e("p",{class:"AiDialogItem__message"}," Your experiment is ready! What do you want to name it? ",-1)),t[46]||(t[46]=e("label",{class:"screen-reader-text",for:"aiDialogQuestion"}," Experiment title ",-1)),e("div",es,[Z(e("textarea",{class:"AiDialogItem__input",name:"aiDialogQuestion",id:"aiDialogQuestion","onUpdate:modelValue":t[10]||(t[10]=i=>a.experimentTitle=i),style:Be(`height: ${a.titleHeight}px`),ref:"title","data-enable-grammarly":"false",onKeydown:t[11]||(t[11]=G(h(()=>{},["prevent"]),["enter"]))},null,36),[[Te,a.experimentTitle]]),e("button",{class:"promptButton",onClick:h(a.saveExperiment,["prevent","stop"]),ref:"titleButton"},t[44]||(t[44]=[p(" ↵ "),e("span",{class:"screen-reader-text"},"Submit experiment title",-1)]),512)]),t[47]||(t[47]=e("p",{class:"AiDialogItem__help"},[p(" Use a title that will help you understand what the experiment does, and what was the reason for creating it."),e("br"),p(" Example: Add latency to a network link of a pod to simulate a high traffic on the auth service ")],-1))])],40,Zi)])])):v("",!0),a.isExperimentSaved?(l(),o("div",ts,[t[50]||(t[50]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",as,[t[49]||(t[49]=e("p",{class:"AiDialogItem__message"}," We're all set! What do you want to do now? ",-1)),e("ul",is,[e("li",null,[e("button",{onClick:h(a.startCreatingPlan,["prevent","stop"]),class:"button button--primary button--large"}," Run experiment ")]),e("li",null,[e("a",{href:`/experiments/workflows/build/?edit=${a.returnedId}`,class:"button button--creative button--large"}," Edit experiment ",8,ss)]),e("li",null,[e("a",{href:`/experiments/view/?id=${a.returnedId}`,class:"button button--light button--large"}," View experiment ",8,ns)])])])])):v("",!0),a.isDeploymentSelectDisplayed?(l(),o("div",ls,[t[53]||(t[53]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",os,[e("form",rs,[e("div",us,[t[51]||(t[51]=e("label",{for:"aiDialogDeploymentSelect"}," Select a deployment ",-1)),e("div",cs,[Z(e("select",{class:"AiDialogItem__input AiDialogItem__input--select",name:"aiDialogDeploymentSelect",id:"aiDialogDeploymentSelect","onUpdate:modelValue":t[12]||(t[12]=i=>a.deploymentId=i),ref:"deploySelect",onChange:a.displayEnvironmentSelect},[(l(!0),o(N,null,$(a.deploys,i=>(l(),o("option",{key:i.id,value:i.id},P(`${a.formatDeploymentType(i.type)} ${i.name}`),9,ds))),128))],544),[[Ye,a.deploymentId]])]),t[52]||(t[52]=e("p",{class:"AiDialogItem__help"}," This is where your experiment will run. ",-1))])])])])):v("",!0),a.isEnvironmentSelectDisplayed?(l(),o("div",ms,[t[56]||(t[56]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",ps,[e("form",vs,[e("div",fs,[t[54]||(t[54]=e("label",{for:"aiDialogEnironmentSelect"}," Select an environment ",-1)),e("div",_s,[Z(e("select",{class:"AiDialogItem__input AiDialogItem__input--select",name:"aiDialogEnvironmentSelect",id:"aiDialogEnvironmentSelect","onUpdate:modelValue":t[13]||(t[13]=i=>a.environmentId=i),ref:"envSelect",onChange:a.displayRun},[(l(!0),o(N,null,$(a.environmentsList,i=>(l(),o("option",{key:i.id,value:i.id},P(i.name),9,gs))),128))],544),[[Ye,a.environmentId]])]),t[55]||(t[55]=e("p",{class:"AiDialogItem__help"}," This is where your environment variables and secrets are stored. ",-1))])])])])):v("",!0),a.isRunDisplayed?(l(),o("div",ys,[t[58]||(t[58]=e("div",{class:"AiDialogItem__icon"},[e("div",{class:"AiIcon AiIcon--small"})],-1)),e("div",Is,[t[57]||(t[57]=e("p",{class:"AiDialogItem__message"},"Your experiment is ready to run!",-1)),e("ul",hs,[e("li",null,[e("button",{onClick:h(a.savePlan,["prevent","stop"]),class:"button button--primary button--large"}," Run experiment now ")]),e("li",null,[e("a",{href:`/experiments/workflows/build/?edit=${a.returnedId}`,class:"button button--creative button--large"}," Edit experiment ",8,As)]),e("li",null,[e("a",{href:`/experiments/view/?id=${a.returnedId}`,class:"button button--light button--large"}," View experiment ",8,bs)])])])])):v("",!0),a.isPlanScheduled?(l(),o("div",xs,[e("div",Ds,[F(a.ScenarioExecution,{"plan-id":a.planId},null,8,["plan-id"])])])):v("",!0),a.isLoaderDisplayed?(l(),o("div",ks,[e("div",Ss,[F(a.LoaderPuff)])])):v("",!0)],512),e("button",{class:"button button--icon AiDialog__close",onClick:h(a.closeAssistant,["prevent","stop"])},[t[60]||(t[60]=e("span",{class:"screen-reader-text"},"Close Assistant",-1)),F(a.XIcon)]),F(a.ScenarioNotificationHandler,{onPlaceError:a.placeError})],544)],64)}const $s=z(ci,[["render",ws]]);export{$s as default};
